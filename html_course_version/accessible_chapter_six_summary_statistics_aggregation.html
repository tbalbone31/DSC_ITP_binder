<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.120">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Chapter 6 - Summary Statistics and Aggregation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="chapter_six_summary_statistics_aggregation_files/libs/clipboard/clipboard.min.js"></script>
<script src="chapter_six_summary_statistics_aggregation_files/libs/quarto-html/quarto.js"></script>
<script src="chapter_six_summary_statistics_aggregation_files/libs/quarto-html/popper.min.js"></script>
<script src="chapter_six_summary_statistics_aggregation_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="chapter_six_summary_statistics_aggregation_files/libs/quarto-html/anchor.min.js"></script>
<link href="chapter_six_summary_statistics_aggregation_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="chapter_six_summary_statistics_aggregation_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="chapter_six_summary_statistics_aggregation_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="chapter_six_summary_statistics_aggregation_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="chapter_six_summary_statistics_aggregation_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

<script src="chapter_six_summary_statistics_aggregation_files/libs/kePrint-0.0.1/kePrint.js"></script>
<link href="chapter_six_summary_statistics_aggregation_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Contents</h2>
   
  <ul>
  <li><a href="#packages-and-datasets" id="toc-packages-and-datasets" class="nav-link active" data-scroll-target="#packages-and-datasets"><span class="toc-section-number">1</span>  Packages and Datasets</a>
  <ul class="collapse">
  <li><a href="#packages" id="toc-packages" class="nav-link" data-scroll-target="#packages"><span class="toc-section-number">1.1</span>  Packages</a></li>
  <li><a href="#exercise" id="toc-exercise" class="nav-link" data-scroll-target="#exercise"><span class="toc-section-number">1.2</span>  Exercise</a></li>
  <li><a href="#datasets" id="toc-datasets" class="nav-link" data-scroll-target="#datasets"><span class="toc-section-number">1.3</span>  Datasets</a></li>
  <li><a href="#exercise-1" id="toc-exercise-1" class="nav-link" data-scroll-target="#exercise-1"><span class="toc-section-number">1.4</span>  Exercise</a></li>
  </ul></li>
  <li><a href="#overall-descriptive-statistics" id="toc-overall-descriptive-statistics" class="nav-link" data-scroll-target="#overall-descriptive-statistics"><span class="toc-section-number">2</span>  Overall Descriptive Statistics</a>
  <ul class="collapse">
  <li><a href="#using-the-describe-method" id="toc-using-the-describe-method" class="nav-link" data-scroll-target="#using-the-describe-method"><span class="toc-section-number">2.1</span>  Using the describe method</a>
  <ul class="collapse">
  <li><a href="#example" id="toc-example" class="nav-link" data-scroll-target="#example"><span class="toc-section-number">2.1.1</span>  Example</a></li>
  <li><a href="#example-2" id="toc-example-2" class="nav-link" data-scroll-target="#example-2"><span class="toc-section-number">2.1.2</span>  Example 2</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#range" id="toc-range" class="nav-link" data-scroll-target="#range"><span class="toc-section-number">3</span>  Range</a>
  <ul class="collapse">
  <li><a href="#min" id="toc-min" class="nav-link" data-scroll-target="#min"><span class="toc-section-number">3.1</span>  min</a>
  <ul class="collapse">
  <li><a href="#example-1" id="toc-example-1" class="nav-link" data-scroll-target="#example-1"><span class="toc-section-number">3.1.1</span>  Example</a></li>
  </ul></li>
  <li><a href="#max" id="toc-max" class="nav-link" data-scroll-target="#max"><span class="toc-section-number">3.2</span>  max</a>
  <ul class="collapse">
  <li><a href="#example-3" id="toc-example-3" class="nav-link" data-scroll-target="#example-3"><span class="toc-section-number">3.2.1</span>  Example</a></li>
  <li><a href="#example-4" id="toc-example-4" class="nav-link" data-scroll-target="#example-4"><span class="toc-section-number">3.2.2</span>  Example</a></li>
  </ul></li>
  <li><a href="#quantiles" id="toc-quantiles" class="nav-link" data-scroll-target="#quantiles"><span class="toc-section-number">3.3</span>  Quantiles</a>
  <ul class="collapse">
  <li><a href="#example-5" id="toc-example-5" class="nav-link" data-scroll-target="#example-5"><span class="toc-section-number">3.3.1</span>  Example</a></li>
  <li><a href="#example-6" id="toc-example-6" class="nav-link" data-scroll-target="#example-6"><span class="toc-section-number">3.3.2</span>  Example</a></li>
  </ul></li>
  <li><a href="#example-2-1" id="toc-example-2-1" class="nav-link" data-scroll-target="#example-2-1"><span class="toc-section-number">3.4</span>  Example 2</a></li>
  <li><a href="#exercise-2" id="toc-exercise-2" class="nav-link" data-scroll-target="#exercise-2"><span class="toc-section-number">3.5</span>  Exercise</a></li>
  </ul></li>
  <li><a href="#averages" id="toc-averages" class="nav-link" data-scroll-target="#averages"><span class="toc-section-number">4</span>  Averages</a>
  <ul class="collapse">
  <li><a href="#mean" id="toc-mean" class="nav-link" data-scroll-target="#mean"><span class="toc-section-number">4.1</span>  Mean</a>
  <ul class="collapse">
  <li><a href="#example-7" id="toc-example-7" class="nav-link" data-scroll-target="#example-7"><span class="toc-section-number">4.1.1</span>  Example</a></li>
  </ul></li>
  <li><a href="#exercise-4" id="toc-exercise-4" class="nav-link" data-scroll-target="#exercise-4"><span class="toc-section-number">4.2</span>  Exercise</a></li>
  <li><a href="#median" id="toc-median" class="nav-link" data-scroll-target="#median"><span class="toc-section-number">4.3</span>  Median</a>
  <ul class="collapse">
  <li><a href="#example-8" id="toc-example-8" class="nav-link" data-scroll-target="#example-8"><span class="toc-section-number">4.3.1</span>  Example</a></li>
  </ul></li>
  <li><a href="#mode" id="toc-mode" class="nav-link" data-scroll-target="#mode"><span class="toc-section-number">4.4</span>  Mode</a>
  <ul class="collapse">
  <li><a href="#example-1-1" id="toc-example-1-1" class="nav-link" data-scroll-target="#example-1-1"><span class="toc-section-number">4.4.1</span>  Example 1</a></li>
  <li><a href="#example-2-2" id="toc-example-2-2" class="nav-link" data-scroll-target="#example-2-2"><span class="toc-section-number">4.4.2</span>  Example 2</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#spread" id="toc-spread" class="nav-link" data-scroll-target="#spread"><span class="toc-section-number">5</span>  Spread</a>
  <ul class="collapse">
  <li><a href="#standard-deviation" id="toc-standard-deviation" class="nav-link" data-scroll-target="#standard-deviation"><span class="toc-section-number">5.1</span>  Standard Deviation</a>
  <ul class="collapse">
  <li><a href="#example-9" id="toc-example-9" class="nav-link" data-scroll-target="#example-9"><span class="toc-section-number">5.1.1</span>  Example</a></li>
  </ul></li>
  <li><a href="#variance" id="toc-variance" class="nav-link" data-scroll-target="#variance"><span class="toc-section-number">5.2</span>  Variance</a>
  <ul class="collapse">
  <li><a href="#example-10" id="toc-example-10" class="nav-link" data-scroll-target="#example-10"><span class="toc-section-number">5.2.1</span>  Example</a></li>
  </ul></li>
  <li><a href="#exercise-6" id="toc-exercise-6" class="nav-link" data-scroll-target="#exercise-6"><span class="toc-section-number">5.3</span>  Exercise</a></li>
  </ul></li>
  <li><a href="#counting-values" id="toc-counting-values" class="nav-link" data-scroll-target="#counting-values"><span class="toc-section-number">6</span>  Counting Values</a>
  <ul class="collapse">
  <li><a href="#counts" id="toc-counts" class="nav-link" data-scroll-target="#counts"><span class="toc-section-number">6.1</span>  Counts</a>
  <ul class="collapse">
  <li><a href="#example-11" id="toc-example-11" class="nav-link" data-scroll-target="#example-11"><span class="toc-section-number">6.1.1</span>  Example</a></li>
  </ul></li>
  <li><a href="#null-value-counts" id="toc-null-value-counts" class="nav-link" data-scroll-target="#null-value-counts"><span class="toc-section-number">6.2</span>  Null Value counts</a>
  <ul class="collapse">
  <li><a href="#example-1-2" id="toc-example-1-2" class="nav-link" data-scroll-target="#example-1-2"><span class="toc-section-number">6.2.1</span>  Example 1</a></li>
  </ul></li>
  <li><a href="#exercise-8" id="toc-exercise-8" class="nav-link" data-scroll-target="#exercise-8"><span class="toc-section-number">6.3</span>  Exercise</a></li>
  <li><a href="#value-counts" id="toc-value-counts" class="nav-link" data-scroll-target="#value-counts"><span class="toc-section-number">6.4</span>  Value Counts</a></li>
  <li><a href="#exercise-9" id="toc-exercise-9" class="nav-link" data-scroll-target="#exercise-9"><span class="toc-section-number">6.5</span>  Exercise</a></li>
  </ul></li>
  <li><a href="#other-summary-statistics" id="toc-other-summary-statistics" class="nav-link" data-scroll-target="#other-summary-statistics"><span class="toc-section-number">7</span>  Other Summary Statistics</a>
  <ul class="collapse">
  <li><a href="#sum" id="toc-sum" class="nav-link" data-scroll-target="#sum"><span class="toc-section-number">7.1</span>  Sum</a>
  <ul class="collapse">
  <li><a href="#example-1-3" id="toc-example-1-3" class="nav-link" data-scroll-target="#example-1-3"><span class="toc-section-number">7.1.1</span>  Example 1</a></li>
  <li><a href="#example-2-3" id="toc-example-2-3" class="nav-link" data-scroll-target="#example-2-3"><span class="toc-section-number">7.1.2</span>  Example 2</a></li>
  </ul></li>
  <li><a href="#unique" id="toc-unique" class="nav-link" data-scroll-target="#unique"><span class="toc-section-number">7.2</span>  Unique</a>
  <ul class="collapse">
  <li><a href="#example-13" id="toc-example-13" class="nav-link" data-scroll-target="#example-13"><span class="toc-section-number">7.2.1</span>  Example</a></li>
  </ul></li>
  <li><a href="#nunique" id="toc-nunique" class="nav-link" data-scroll-target="#nunique"><span class="toc-section-number">7.3</span>  Nunique</a>
  <ul class="collapse">
  <li><a href="#example-14" id="toc-example-14" class="nav-link" data-scroll-target="#example-14"><span class="toc-section-number">7.3.1</span>  Example</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#creating-size-bands" id="toc-creating-size-bands" class="nav-link" data-scroll-target="#creating-size-bands"><span class="toc-section-number">8</span>  Creating Size Bands</a>
  <ul class="collapse">
  <li><a href="#pd.cut" id="toc-pd.cut" class="nav-link" data-scroll-target="#pd.cut"><span class="toc-section-number">8.1</span>  pd.cut()</a>
  <ul class="collapse">
  <li><a href="#example-15" id="toc-example-15" class="nav-link" data-scroll-target="#example-15"><span class="toc-section-number">8.1.1</span>  Example</a></li>
  <li><a href="#example-1-4" id="toc-example-1-4" class="nav-link" data-scroll-target="#example-1-4"><span class="toc-section-number">8.1.2</span>  Example 1</a></li>
  <li><a href="#example-2-4" id="toc-example-2-4" class="nav-link" data-scroll-target="#example-2-4"><span class="toc-section-number">8.1.3</span>  Example 2</a></li>
  <li><a href="#example-3-1" id="toc-example-3-1" class="nav-link" data-scroll-target="#example-3-1"><span class="toc-section-number">8.1.4</span>  Example 3</a></li>
  </ul></li>
  <li><a href="#pd.qcut" id="toc-pd.qcut" class="nav-link" data-scroll-target="#pd.qcut"><span class="toc-section-number">8.2</span>  pd.qcut()</a>
  <ul class="collapse">
  <li><a href="#example-16" id="toc-example-16" class="nav-link" data-scroll-target="#example-16"><span class="toc-section-number">8.2.1</span>  Example</a></li>
  </ul></li>
  <li><a href="#visual-differences-between-cut-and-qcut" id="toc-visual-differences-between-cut-and-qcut" class="nav-link" data-scroll-target="#visual-differences-between-cut-and-qcut"><span class="toc-section-number">8.3</span>  Visual Differences between cut and qcut</a></li>
  <li><a href="#chart-code" id="toc-chart-code" class="nav-link" data-scroll-target="#chart-code"><span class="toc-section-number">8.4</span>  Chart Code</a></li>
  </ul></li>
  <li><a href="#aggregation" id="toc-aggregation" class="nav-link" data-scroll-target="#aggregation"><span class="toc-section-number">9</span>  Aggregation</a>
  <ul class="collapse">
  <li><a href="#introducing-the-groupby-method" id="toc-introducing-the-groupby-method" class="nav-link" data-scroll-target="#introducing-the-groupby-method"><span class="toc-section-number">9.1</span>  Introducing the groupby method</a>
  <ul class="collapse">
  <li><a href="#example-1-5" id="toc-example-1-5" class="nav-link" data-scroll-target="#example-1-5"><span class="toc-section-number">9.1.1</span>  Example 1</a></li>
  <li><a href="#example-2-5" id="toc-example-2-5" class="nav-link" data-scroll-target="#example-2-5"><span class="toc-section-number">9.1.2</span>  Example 2</a></li>
  <li><a href="#example-3-2" id="toc-example-3-2" class="nav-link" data-scroll-target="#example-3-2"><span class="toc-section-number">9.1.3</span>  Example 3</a></li>
  </ul></li>
  <li><a href="#exercise-11" id="toc-exercise-11" class="nav-link" data-scroll-target="#exercise-11"><span class="toc-section-number">9.2</span>  Exercise</a></li>
  <li><a href="#multiple-aggregation" id="toc-multiple-aggregation" class="nav-link" data-scroll-target="#multiple-aggregation"><span class="toc-section-number">9.3</span>  Multiple Aggregation</a>
  <ul class="collapse">
  <li><a href="#example-1-6" id="toc-example-1-6" class="nav-link" data-scroll-target="#example-1-6"><span class="toc-section-number">9.3.1</span>  Example 1</a></li>
  <li><a href="#example-2-6" id="toc-example-2-6" class="nav-link" data-scroll-target="#example-2-6"><span class="toc-section-number">9.3.2</span>  Example 2</a></li>
  </ul></li>
  <li><a href="#exercise-13" id="toc-exercise-13" class="nav-link" data-scroll-target="#exercise-13"><span class="toc-section-number">9.4</span>  Exercise</a></li>
  </ul></li>
  <li><a href="#chapter-summary" id="toc-chapter-summary" class="nav-link" data-scroll-target="#chapter-summary"><span class="toc-section-number">10</span>  Chapter Summary</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Chapter 6 - Summary Statistics and Aggregation</h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<p><img src="../images/AF_DSC_banner.png" class="img-fluid" alt="Government Analysis Function and Data Science Campus Logos."></p>
<div class="cell">

</div>
<p>This is a HTML document. The Introduction to Python course is written and intended to be used in a Jupyter Notebook file. These HTML documents have been made available for users who require screen readers or other accessibility needs. These HTML documents have been tested, but if you notice any errors or any compatibility issues please contact us on the GSS Capability email inbox.</p>
<p>If you are using a screen reader you will need to set your punctuation level (sometimes called verbosity) to full, especially for the code sections.</p>
<p><em>Chapter Overview and Learning Objectives</em>:</p>
<ul>
<li><p><a href="#packages">Packages and Data</a></p></li>
<li><p>Packages</p></li>
<li><p>Data</p></li>
<li><p><a href="#describe">Overall Descriptive Statistics</a></p></li>
<li><p><a href="#range">Range</a></p></li>
<li><p>min</p></li>
<li><p>max</p></li>
<li><p>quantiles</p></li>
<li><p><a href="#averages">Averages</a></p></li>
<li><p>Mean</p></li>
<li><p>Median</p></li>
<li><p>Mode</p></li>
<li><p><a href="#spread">Spread</a></p></li>
<li><p>Standard Deviation</p></li>
<li><p>Variance</p></li>
<li><p><a href="#count">Counting Values</a></p></li>
<li><p>Counts</p></li>
<li><p>Null Value counts</p></li>
<li><p>Value Counts</p></li>
<li><p><a href="#other">Other Summary Statistics</a></p></li>
<li><p><a href="#cut">Creating Size Bands</a></p></li>
<li><p><a href="#agg">Aggregation</a></p></li>
</ul>
<p><a id="packages" href=""></a></p>
<section id="packages-and-datasets" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Packages and Datasets</h1>
<section id="packages" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="packages"><span class="header-section-number">1.1</span> Packages</h2>
<p>As a reminder, we should always import our packages at the top of our script. In this session we will use the following:</p>
<ul>
<li>pandas, and give it the nickname pd</li>
<li>numpy and give it the nickname np</li>
</ul>
</section>
<section id="exercise" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="exercise"><span class="header-section-number">1.2</span> Exercise</h2>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href=""><strong>Packages</strong></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href=""><strong>Show Answer</strong></a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="unnumbered tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>Import Pandas and give it the nickname pd Import Numpy and give it the nickname np</p>
</div>
<div id="tabset-1-2" class="unnumbered tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-2"><a aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="datasets" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="datasets"><span class="header-section-number">1.3</span> Datasets</h2>
<p>Good practice also dictates that we read in our datasets at the top of our script too.</p>
<p>In this session we’ll be using</p>
<table class="table">
<thead>
<tr class="header">
<th>variable name</th>
<th>file name</th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>animals</td>
<td>animals.csv</td>
<td></td>
</tr>
<tr class="even">
<td>titanic</td>
<td>titanic.xlsx</td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="exercise-1" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="exercise-1"><span class="header-section-number">1.4</span> Exercise</h2>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true" href=""><strong>Load in the Data</strong></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false" href=""><strong>Show Answer</strong></a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="unnumbered tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<p>Load in these datasets listed above</p>
<p>You can check your variables are loaded by using %whos in Jupyter. In Spyder or other IDE’s they should appear in your variable explorer.</p>
</div>
<div id="tabset-2-2" class="unnumbered tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a aria-hidden="true" tabindex="-1"></a>animals <span class="op">=</span> pd.read_csv(<span class="st">"../data/animals.csv"</span>)</span>
<span id="cb2-2"><a aria-hidden="true" tabindex="-1"></a>titanic <span class="op">=</span> pd.read_excel(<span class="st">"../data/titanic.xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<p>If you struggle with this section, feel free to review the content of Chapter 3 that covered this in depth. Practicing these commands that we repeat over and over is a great way to retain the good practice guidelines.</p>
<p><a id="describe" href=""></a></p>
</section>
</section>
<section id="overall-descriptive-statistics" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Overall Descriptive Statistics</h1>
<p>Pandas has an inbuilt method to get basic descriptive statistics across our dataset, this is the .describe() method.</p>
<section id="using-the-describe-method" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="using-the-describe-method"><span class="header-section-number">2.1</span> Using the describe method</h2>
<section id="example" class="level3" data-number="2.1.1">
<h3 data-number="2.1.1" class="anchored" data-anchor-id="example"><span class="header-section-number">2.1.1</span> Example</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a aria-hidden="true" tabindex="-1"></a>titanic.describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; "><table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:right;"> pclass </th>
   <th style="text-align:right;"> survived </th>
   <th style="text-align:right;"> age </th>
   <th style="text-align:right;"> sibsp </th>
   <th style="text-align:right;"> parch </th>
   <th style="text-align:right;"> fare </th>
   <th style="text-align:right;"> body </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> count </td>
   <td style="text-align:right;"> 1309.000000 </td>
   <td style="text-align:right;"> 1309.0000000 </td>
   <td style="text-align:right;"> 1046.00000 </td>
   <td style="text-align:right;"> 1309.0000000 </td>
   <td style="text-align:right;"> 1309.0000000 </td>
   <td style="text-align:right;"> 1308.00000 </td>
   <td style="text-align:right;"> 121.00000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> mean </td>
   <td style="text-align:right;"> 2.294882 </td>
   <td style="text-align:right;"> 0.3819710 </td>
   <td style="text-align:right;"> 29.88113 </td>
   <td style="text-align:right;"> 0.4988541 </td>
   <td style="text-align:right;"> 0.3850267 </td>
   <td style="text-align:right;"> 33.29548 </td>
   <td style="text-align:right;"> 160.80992 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> std </td>
   <td style="text-align:right;"> 0.837836 </td>
   <td style="text-align:right;"> 0.4860552 </td>
   <td style="text-align:right;"> 14.41350 </td>
   <td style="text-align:right;"> 1.0416584 </td>
   <td style="text-align:right;"> 0.8655603 </td>
   <td style="text-align:right;"> 51.75867 </td>
   <td style="text-align:right;"> 97.69692 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> min </td>
   <td style="text-align:right;"> 1.000000 </td>
   <td style="text-align:right;"> 0.0000000 </td>
   <td style="text-align:right;"> 0.16670 </td>
   <td style="text-align:right;"> 0.0000000 </td>
   <td style="text-align:right;"> 0.0000000 </td>
   <td style="text-align:right;"> 0.00000 </td>
   <td style="text-align:right;"> 1.00000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 25% </td>
   <td style="text-align:right;"> 2.000000 </td>
   <td style="text-align:right;"> 0.0000000 </td>
   <td style="text-align:right;"> 21.00000 </td>
   <td style="text-align:right;"> 0.0000000 </td>
   <td style="text-align:right;"> 0.0000000 </td>
   <td style="text-align:right;"> 7.89580 </td>
   <td style="text-align:right;"> 72.00000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 50% </td>
   <td style="text-align:right;"> 3.000000 </td>
   <td style="text-align:right;"> 0.0000000 </td>
   <td style="text-align:right;"> 28.00000 </td>
   <td style="text-align:right;"> 0.0000000 </td>
   <td style="text-align:right;"> 0.0000000 </td>
   <td style="text-align:right;"> 14.45420 </td>
   <td style="text-align:right;"> 155.00000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 75% </td>
   <td style="text-align:right;"> 3.000000 </td>
   <td style="text-align:right;"> 1.0000000 </td>
   <td style="text-align:right;"> 39.00000 </td>
   <td style="text-align:right;"> 1.0000000 </td>
   <td style="text-align:right;"> 0.0000000 </td>
   <td style="text-align:right;"> 31.27500 </td>
   <td style="text-align:right;"> 256.00000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> max </td>
   <td style="text-align:right;"> 3.000000 </td>
   <td style="text-align:right;"> 1.0000000 </td>
   <td style="text-align:right;"> 80.00000 </td>
   <td style="text-align:right;"> 8.0000000 </td>
   <td style="text-align:right;"> 9.0000000 </td>
   <td style="text-align:right;"> 512.32920 </td>
   <td style="text-align:right;"> 328.00000 </td>
  </tr>
</tbody>
</table></div>

</div>
</div>
<p>We can also get summary statistics on a specific column.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a aria-hidden="true" tabindex="-1"></a>titanic[<span class="st">"fare"</span>].describe()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>count    1308.000000
mean       33.295479
std        51.758668
min         0.000000
25%         7.895800
50%        14.454200
75%        31.275000
max       512.329200
Name: fare, dtype: float64</code></pre>
</div>
</div>
<p>These statistics are explained in more detail below:</p>
<table class="table">
<colgroup>
<col style="width: 60%">
<col style="width: 39%">
</colgroup>
<thead>
<tr class="header">
<th>Summary Statistic</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>count</td>
<td>the number (count) of non missing entries in the given column.</td>
</tr>
<tr class="even">
<td>mean</td>
<td>the average (arithmetic mean) data value in the given column.</td>
</tr>
<tr class="odd">
<td>std</td>
<td>the standard deviation (spread) of values in the given column.</td>
</tr>
<tr class="even">
<td>min</td>
<td>the smallest value in the given column.</td>
</tr>
<tr class="odd">
<td>25%</td>
<td>the value of the data at the lower quartile <br> (i.e.&nbsp;after the first 25% of data, ordered from smallest to largest).</td>
</tr>
<tr class="even">
<td>50%</td>
<td>the middle value of the data (aka the median). <br> half the values are larger than this value, and half smaller.</td>
</tr>
<tr class="odd">
<td>75%</td>
<td>the value of the data at the upper quartile <br> (i.e.&nbsp;after the first 75% of data, ordered from smallest to largest).</td>
</tr>
<tr class="even">
<td>max</td>
<td>the maximum data value recorded.</td>
</tr>
</tbody>
</table>
</section>
<section id="example-2" class="level3" data-number="2.1.2">
<h3 data-number="2.1.2" class="anchored" data-anchor-id="example-2"><span class="header-section-number">2.1.2</span> Example 2</h3>
<p>Describe works across all numeric columns by default. We can display descriptive information for other data types by using the parameter include=</p>
<p>This parameter takes a list as the input; even if we’re just including one kind of data. Here we’re specifying that we want to include “object”, our text/string columns.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a aria-hidden="true" tabindex="-1"></a>titanic.describe(include<span class="op">=</span>[<span class="st">"object"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; "><table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:left;"> name </th>
   <th style="text-align:left;"> sex </th>
   <th style="text-align:left;"> ticket </th>
   <th style="text-align:left;"> cabin </th>
   <th style="text-align:left;"> embarked </th>
   <th style="text-align:left;"> home.dest </th>
   <th style="text-align:left;"> boat </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> count </td>
   <td style="text-align:left;"> 1309 </td>
   <td style="text-align:left;"> 1309 </td>
   <td style="text-align:left;"> 1309 </td>
   <td style="text-align:left;"> 295 </td>
   <td style="text-align:left;"> 1307 </td>
   <td style="text-align:left;"> 745 </td>
   <td style="text-align:left;"> 486 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> unique </td>
   <td style="text-align:left;"> 1307 </td>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 929 </td>
   <td style="text-align:left;"> 186 </td>
   <td style="text-align:left;"> 3 </td>
   <td style="text-align:left;"> 369 </td>
   <td style="text-align:left;"> 28 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> top </td>
   <td style="text-align:left;"> Connolly, Miss. Kate </td>
   <td style="text-align:left;"> male </td>
   <td style="text-align:left;"> CA. 2343 </td>
   <td style="text-align:left;"> C23 C25 C27 </td>
   <td style="text-align:left;"> S </td>
   <td style="text-align:left;"> New York, NY </td>
   <td style="text-align:left;"> 13 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> freq </td>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> 843 </td>
   <td style="text-align:left;"> 11 </td>
   <td style="text-align:left;"> 6 </td>
   <td style="text-align:left;"> 914 </td>
   <td style="text-align:left;"> 64 </td>
   <td style="text-align:left;"> 39 </td>
  </tr>
</tbody>
</table></div>

</div>
</div>
<table class="table">
<colgroup>
<col style="width: 60%">
<col style="width: 39%">
</colgroup>
<thead>
<tr class="header">
<th>Summary Statistic</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>count</td>
<td>The number (count) of non missing entries in the given column.</td>
</tr>
<tr class="even">
<td>unique</td>
<td>The number of unique variables in a column.</td>
</tr>
<tr class="odd">
<td>top</td>
<td>The most frequently occurring value.</td>
</tr>
<tr class="even">
<td>freq</td>
<td>The frequency of the “top” value (how often it appears).</td>
</tr>
</tbody>
</table>
<p>If there are two or more “top” values; e.g.&nbsp;both most frequently occurring values that have the same frequency within the table, Python will <a href="https://github.com/pandas-dev/pandas/issues/15833">kind of arbitrarily</a> choose one of them to be the top value. The link is added for general interest, you don’t need to understand it.</p>
<p>In this data there are two women and two men who share the same name. Pandas will choose one of them to display.</p>
<p><a id="range" href=""></a></p>
</section>
</section>
</section>
<section id="range" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Range</h1>
<p>We can also access these summary statistics individually. In most cases the name of the method is the same as the summary statistic.</p>
<section id="min" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="min"><span class="header-section-number">3.1</span> min</h2>
<p>We can use .min() to return the minimum value in a column.</p>
<section id="example-1" class="level3" data-number="3.1.1">
<h3 data-number="3.1.1" class="anchored" data-anchor-id="example-1"><span class="header-section-number">3.1.1</span> Example</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a aria-hidden="true" tabindex="-1"></a>titanic[<span class="st">"fare"</span>].<span class="bu">min</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0.0</code></pre>
</div>
</div>
<p>This also works for object (text) columns.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a aria-hidden="true" tabindex="-1"></a>titanic[<span class="st">"name"</span>].<span class="bu">min</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'Abbing, Mr. Anthony'</code></pre>
</div>
</div>
</section>
</section>
<section id="max" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="max"><span class="header-section-number">3.2</span> max</h2>
<p>We can use .max() to return the maximum value in a column.</p>
<section id="example-3" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="example-3"><span class="header-section-number">3.2.1</span> Example</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a aria-hidden="true" tabindex="-1"></a>titanic[<span class="st">"fare"</span>].<span class="bu">max</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>512.3292</code></pre>
</div>
</div>
<p>This also works for object (text) columns.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a aria-hidden="true" tabindex="-1"></a>titanic[<span class="st">"name"</span>].<span class="bu">max</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'van Melkebeke, Mr. Philemon'</code></pre>
</div>
</div>
<p>Something important to note here is that pandas effectively assigns a value to each letter. This goes A-Z and <strong>then</strong> a-z. So a lower case “a” is treated as coming <strong>after</strong> a capital “Z” in Python.</p>
<p>This is why van Melkebeke, Mr.&nbsp;Philemon is the maximum value in our Titanic Dataframe rather than Zimmerman, Mr Leo. We can handle this issue by ensuring our data is either all lower case or all upper case before finding the .min() or .max() values.</p>
</section>
<section id="example-4" class="level3" data-number="3.2.2">
<h3 data-number="3.2.2" class="anchored" data-anchor-id="example-4"><span class="header-section-number">3.2.2</span> Example</h3>
<p>Here I have handled the issue by chaining the methods .str.lower() and .max() together. If I wanted to do more work with this column in future I may consider overwriting it with a lower case version (which would form part of the cleaning routine).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a aria-hidden="true" tabindex="-1"></a>titanic[<span class="st">"name"</span>].<span class="bu">str</span>.lower().<span class="bu">max</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>'zimmerman, mr. leo'</code></pre>
</div>
</div>
<p>The chaining of methods here applies left to right just as it is read, the column is selected, then the .lower() method is used from <code>str</code> methods, and then the .max() method is applied to the lower case column.</p>
</section>
</section>
<section id="quantiles" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="quantiles"><span class="header-section-number">3.3</span> Quantiles</h2>
<p>We can use .quantile() to find information at different points of our data.</p>
<section id="example-5" class="level3" data-number="3.3.1">
<h3 data-number="3.3.1" class="anchored" data-anchor-id="example-5"><span class="header-section-number">3.3.1</span> Example</h3>
<p>Our parameter is q= and then a decimal number. If we don’t specify this the default behaviour is 0.5, which returns the median (as it is the 50% quantile).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a aria-hidden="true" tabindex="-1"></a>titanic[<span class="st">"fare"</span>].quantile(q<span class="op">=</span><span class="fl">0.25</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>7.8958</code></pre>
</div>
</div>
<p>If we wish to specify more than one, we pass a list to the parameter q=</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a aria-hidden="true" tabindex="-1"></a>titanic[<span class="st">"fare"</span>].quantile(q<span class="op">=</span>[<span class="dv">0</span>, <span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>, <span class="dv">1</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0.00      0.0000
0.25      7.8958
0.50     14.4542
0.75     31.2750
1.00    512.3292
Name: fare, dtype: float64</code></pre>
</div>
</div>
<p>This is a great time to mention that you don’t necessary need to type a full list of numbers this way, plus the numbers we may want to use could belong to an enormous list, which is unreasonable to type by hand. This is where the range functions come in.</p>
<p>There are two of these functions:</p>
<ul>
<li><p>range(start=, stop=, step=) where the start parameter specifies where to start, stop specifies where to stop (which is <strong>exclusive</strong>! Not included) and step is how we should jump from number to number, this <strong>must</strong> be an integer.</p></li>
<li><p>np.arange(start=, stop=, step=) comes from the numpy package (np) and creates <strong>a</strong> range from the start to the stop values (where the stop is <strong>exclusive</strong>). However, this function allows us to step in increments of any size, including floats (or decimal numbers).</p></li>
</ul>
<p>Let’s see two quick examples before using this with the quantile() function.</p>
</section>
<section id="example-6" class="level3" data-number="3.3.2">
<h3 data-number="3.3.2" class="anchored" data-anchor-id="example-6"><span class="header-section-number">3.3.2</span> Example</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a aria-hidden="true" tabindex="-1"></a><span class="co"># Creating a range object </span></span>
<span id="cb21-2"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="bu">range</span>(<span class="dv">0</span>, <span class="dv">10</span>, <span class="dv">2</span>) <span class="co"># Jump from 0-10 in increments of 2</span></span>
<span id="cb21-4"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-5"><a aria-hidden="true" tabindex="-1"></a><span class="co"># Using np.arange() to obtain an array of values</span></span>
<span id="cb21-6"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> np.arange(<span class="dv">0</span>, <span class="dv">10</span>, <span class="fl">0.5</span>) <span class="co"># Jump from 0-10 in increments of 0.5</span></span>
<span id="cb21-8"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-9"><a aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(x, y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>range(0, 10, 2) [0.  0.5 1.  1.5 2.  2.5 3.  3.5 4.  4.5 5.  5.5 6.  6.5 7.  7.5 8.  8.5
 9.  9.5]</code></pre>
</div>
</div>
<p>You see here that the range() function gives a range object, rather than a list like structure of the values themselves, this restricts its use even further as it is less readable. It is recommended that np.arange() is used in most circumstances. Whilst the second output looks like a list, it is actually an <strong>array</strong>, a numpy specific object that is beyond the scope of this course.</p>
<p>For more information consult this <a href="https://numpy.org/doc/stable/user/absolute_beginners.html">link</a> from Numpy. In the future, there will be some <strong>Reference Material</strong> added to this course that introduces this data type, as it is a great piece of material to come back to when moving onto more complex causes like <strong>Introduction to Machine Learning</strong>. This will never be listed as Core material, so don’t concern yourself too much with it.</p>
</section>
</section>
<section id="example-2-1" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="example-2-1"><span class="header-section-number">3.4</span> Example 2</h2>
<p>Let’s see how this function helps when finding quantiles.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a aria-hidden="true" tabindex="-1"></a><span class="co"># Note that .arange() comes from the numpy package (np)</span></span>
<span id="cb23-2"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a aria-hidden="true" tabindex="-1"></a>titanic[<span class="st">"fare"</span>].quantile(q<span class="op">=</span>np.arange(start<span class="op">=</span><span class="fl">0.0</span>, </span>
<span id="cb23-5"><a aria-hidden="true" tabindex="-1"></a>                                     stop<span class="op">=</span><span class="fl">1.1</span>,  <span class="co"># Remember this is exclusive!</span></span>
<span id="cb23-6"><a aria-hidden="true" tabindex="-1"></a>                                     step<span class="op">=</span><span class="fl">0.1</span>)) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0.0      0.00000
0.1      7.56750
0.2      7.85420
0.3      8.05000
0.4     10.50000
0.5     14.45420
0.6     21.67920
0.7     26.95500
0.8     41.57920
0.9     78.05082
1.0    512.32920
Name: fare, dtype: float64</code></pre>
</div>
</div>
</section>
<section id="exercise-2" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="exercise-2"><span class="header-section-number">3.5</span> Exercise</h2>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true" href=""><strong>Exercise</strong></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false" href=""><strong>Show Answer</strong></a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="unnumbered tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<ol type="a">
<li>How old are the youngest and oldest passengers in the titanic DataFrame?</li>
<li>Print out the 20th, 40th, 60th and 80th percentiles of the fare column in the titanic DataFrame.</li>
</ol>
</div>
<div id="tabset-3-2" class="unnumbered tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a aria-hidden="true" tabindex="-1"></a><span class="co"># (a)</span></span>
<span id="cb25-2"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-3"><a aria-hidden="true" tabindex="-1"></a>max_age <span class="op">=</span> titanic[<span class="st">"age"</span>].<span class="bu">max</span>()</span>
<span id="cb25-4"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-5"><a aria-hidden="true" tabindex="-1"></a>min_age <span class="op">=</span> titanic[<span class="st">"age"</span>].<span class="bu">min</span>()</span>
<span id="cb25-6"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-7"><a aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"The oldest person on the titanic was"</span>, max_age, <span class="st">"and the youngest person was"</span>, <span class="bu">str</span>(min_age)<span class="op">+</span><span class="st">"."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>The oldest person on the titanic was 80.0 and the youngest person was 0.1667.</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a aria-hidden="true" tabindex="-1"></a><span class="co"># (b)</span></span>
<span id="cb27-2"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a aria-hidden="true" tabindex="-1"></a>percentiles <span class="op">=</span> titanic[<span class="st">"fare"</span>].quantile(q <span class="op">=</span> np.arange(start <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span id="cb27-4"><a aria-hidden="true" tabindex="-1"></a>                                                     stop <span class="op">=</span> <span class="dv">1</span>,</span>
<span id="cb27-5"><a aria-hidden="true" tabindex="-1"></a>                                                     step <span class="op">=</span> <span class="fl">0.2</span>))</span>
<span id="cb27-6"><a aria-hidden="true" tabindex="-1"></a>percentiles</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0.2     7.8542
0.4    10.5000
0.6    21.6792
0.8    41.5792
Name: fare, dtype: float64</code></pre>
</div>
</div>
</div>
</div>
</div>
<p><a id="averages" href=""></a></p>
</section>
</section>
<section id="averages" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Averages</h1>
<p>Now we will look at Measures of Central Tendency, often referred to as Averages.</p>
<section id="mean" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="mean"><span class="header-section-number">4.1</span> Mean</h2>
<p>Seen briefly in the previous chapter when discussing filling in missing values, the .mean() method (this is the <strong>arithmetic mean</strong>, which corresponds to summing all values and then dividing by the number of values there were) computes the arithmetic mean of a column.</p>
<section id="example-7" class="level3" data-number="4.1.1">
<h3 data-number="4.1.1" class="anchored" data-anchor-id="example-7"><span class="header-section-number">4.1.1</span> Example</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a aria-hidden="true" tabindex="-1"></a><span class="co"># Compute mean of the fare column</span></span>
<span id="cb29-2"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a aria-hidden="true" tabindex="-1"></a>titanic[<span class="st">"fare"</span>].mean()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>33.29547928134557</code></pre>
</div>
</div>
</section>
</section>
<section id="exercise-4" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="exercise-4"><span class="header-section-number">4.2</span> Exercise</h2>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true" href=""><strong>Exercise</strong></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false" href=""><strong>Show Answer</strong></a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="unnumbered tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<p>Confirm that the value given by .mean() for the fare column is the same as computing it manually.</p>
<p>Hint: You will need the .sum() function to compute the total of the column and the .count() function to compute the number of values (we will see this function in some more detail later). Remember that to compare if two objects are equal, we need to use ==.</p>
</div>
<div id="tabset-4-2" class="unnumbered tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a aria-hidden="true" tabindex="-1"></a>mean_way_one <span class="op">=</span> titanic[<span class="st">"fare"</span>].mean()</span>
<span id="cb31-2"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-3"><a aria-hidden="true" tabindex="-1"></a>mean_way_two <span class="op">=</span> titanic[<span class="st">"fare"</span>].<span class="bu">sum</span>()<span class="op">/</span>titanic[<span class="st">"fare"</span>].count()</span>
<span id="cb31-4"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-5"><a aria-hidden="true" tabindex="-1"></a><span class="co"># Remember to compare two objects we use the == logical operator to return True or False</span></span>
<span id="cb31-6"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-7"><a aria-hidden="true" tabindex="-1"></a>mean_way_one <span class="op">==</span> mean_way_two</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>True</code></pre>
</div>
</div>
<p>An interesting observation here is the using len() won’t work here and provide an answer that is slightly out, this is because len() counts all values (including nulls), whereas .count() only counts the non-null values (and is what is used by .mean() in the background).</p>
</div>
</div>
</div>
</section>
<section id="median" class="level2" data-number="4.3">
<h2 data-number="4.3" class="anchored" data-anchor-id="median"><span class="header-section-number">4.3</span> Median</h2>
<p>The .median() is the middle value (50th percentile) when the numbers are listed in order.</p>
<section id="example-8" class="level3" data-number="4.3.1">
<h3 data-number="4.3.1" class="anchored" data-anchor-id="example-8"><span class="header-section-number">4.3.1</span> Example</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a aria-hidden="true" tabindex="-1"></a>titanic[<span class="st">"fare"</span>].median()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>14.4542</code></pre>
</div>
</div>
</section>
</section>
<section id="mode" class="level2" data-number="4.4">
<h2 data-number="4.4" class="anchored" data-anchor-id="mode"><span class="header-section-number">4.4</span> Mode</h2>
<p>The .mode() is the value that occurs most frequently in the column.</p>
<section id="example-1-1" class="level3" data-number="4.4.1">
<h3 data-number="4.4.1" class="anchored" data-anchor-id="example-1-1"><span class="header-section-number">4.4.1</span> Example 1</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a aria-hidden="true" tabindex="-1"></a>titanic[<span class="st">"fare"</span>].mode()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0    8.05
Name: fare, dtype: float64</code></pre>
</div>
</div>
</section>
<section id="example-2-2" class="level3" data-number="4.4.2">
<h3 data-number="4.4.2" class="anchored" data-anchor-id="example-2-2"><span class="header-section-number">4.4.2</span> Example 2</h3>
<p>We can also find the mode in object based columns. Here the name column has two modes, since both “Connolly, Miss. Kate” and “Kelly, Mr.&nbsp;James” appear twice in the Data Frame.</p>
<p>Generally, when these cases appear the following terminology is used:</p>
<ul>
<li>One mode - Unimodal</li>
<li>Two modes - Bimodal</li>
<li>Three modes - Trimodal</li>
</ul>
<p>As such, the name column is bimodal in this example. If you’re wondering how we know the frequency (the number of times they each appear in the DataFrame), we will see a very useful method for this later in the chapter.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a aria-hidden="true" tabindex="-1"></a>titanic[<span class="st">"name"</span>].mode()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0    Connolly, Miss. Kate
1        Kelly, Mr. James
Name: name, dtype: object</code></pre>
</div>
</div>
<p>Interestingly this data isn’t duplicates! There really were two separate individuals with those names!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a aria-hidden="true" tabindex="-1"></a>titanic[(titanic[<span class="st">"name"</span>] <span class="op">==</span> <span class="st">"Connolly, Miss. Kate"</span>) <span class="op">|</span> (titanic[<span class="st">"name"</span>] <span class="op">==</span> <span class="st">"Kelly, Mr. James"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; "><table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:right;"> pclass </th>
   <th style="text-align:right;"> survived </th>
   <th style="text-align:left;"> name </th>
   <th style="text-align:left;"> sex </th>
   <th style="text-align:right;"> age </th>
   <th style="text-align:right;"> sibsp </th>
   <th style="text-align:right;"> parch </th>
   <th style="text-align:left;"> ticket </th>
   <th style="text-align:right;"> fare </th>
   <th style="text-align:left;"> cabin </th>
   <th style="text-align:left;"> embarked </th>
   <th style="text-align:left;"> home.dest </th>
   <th style="text-align:right;"> body </th>
   <th style="text-align:left;"> boat </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> 725 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:left;"> Connolly, Miss. Kate </td>
   <td style="text-align:left;"> female </td>
   <td style="text-align:right;"> 22.0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:left;"> 370373 </td>
   <td style="text-align:right;"> 7.7500 </td>
   <td style="text-align:left;"> NaN </td>
   <td style="text-align:left;"> Q </td>
   <td style="text-align:left;"> Ireland </td>
   <td style="text-align:right;"> NaN </td>
   <td style="text-align:left;"> 13 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 726 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:left;"> Connolly, Miss. Kate </td>
   <td style="text-align:left;"> female </td>
   <td style="text-align:right;"> 30.0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:left;"> 330972 </td>
   <td style="text-align:right;"> 7.6292 </td>
   <td style="text-align:left;"> NaN </td>
   <td style="text-align:left;"> Q </td>
   <td style="text-align:left;"> Ireland </td>
   <td style="text-align:right;"> NaN </td>
   <td style="text-align:left;"> NaN </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 924 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:left;"> Kelly, Mr. James </td>
   <td style="text-align:left;"> male </td>
   <td style="text-align:right;"> 34.5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:left;"> 330911 </td>
   <td style="text-align:right;"> 7.8292 </td>
   <td style="text-align:left;"> NaN </td>
   <td style="text-align:left;"> Q </td>
   <td style="text-align:left;"> NaN </td>
   <td style="text-align:right;"> 70 </td>
   <td style="text-align:left;"> NaN </td>
  </tr>
  <tr>
   <td style="text-align:left;"> 925 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:left;"> Kelly, Mr. James </td>
   <td style="text-align:left;"> male </td>
   <td style="text-align:right;"> 44.0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:left;"> 363592 </td>
   <td style="text-align:right;"> 8.0500 </td>
   <td style="text-align:left;"> NaN </td>
   <td style="text-align:left;"> S </td>
   <td style="text-align:left;"> NaN </td>
   <td style="text-align:right;"> NaN </td>
   <td style="text-align:left;"> NaN </td>
  </tr>
</tbody>
</table></div>

</div>
</div>
<p><a id="spread" href=""></a></p>
</section>
</section>
</section>
<section id="spread" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Spread</h1>
<p>Another element of the data we often want to investigate is how spread out it is, we use Measures of Spread to do so.</p>
<section id="standard-deviation" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="standard-deviation"><span class="header-section-number">5.1</span> Standard Deviation</h2>
<p>The standard deviation measures the spread of the data about the mean value. It shows you how much your data distribution is spread out around the mean or average.</p>
<section id="example-9" class="level3" data-number="5.1.1">
<h3 data-number="5.1.1" class="anchored" data-anchor-id="example-9"><span class="header-section-number">5.1.1</span> Example</h3>
<p>We can calculate the standard deviation using the .std() method.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb40-1"><a aria-hidden="true" tabindex="-1"></a>titanic[<span class="st">"fare"</span>].std()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>51.75866823917411</code></pre>
</div>
</div>
</section>
</section>
<section id="variance" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="variance"><span class="header-section-number">5.2</span> Variance</h2>
<p>Variance measures how spread out the values of a variable are in general.</p>
<section id="example-10" class="level3" data-number="5.2.1">
<h3 data-number="5.2.1" class="anchored" data-anchor-id="example-10"><span class="header-section-number">5.2.1</span> Example</h3>
<p>We can calculate the variance using the .var() method.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb42-1"><a aria-hidden="true" tabindex="-1"></a>titanic[<span class="st">"fare"</span>].var()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>2678.959737892891</code></pre>
</div>
</div>
</section>
</section>
<section id="exercise-6" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="exercise-6"><span class="header-section-number">5.3</span> Exercise</h2>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true" href=""><strong>Exercise</strong></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false" href=""><strong>Show Answer</strong></a></li></ul>
<div class="tab-content">
<div id="tabset-5-1" class="unnumbered tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<p>(a)(i) Find the variance and standard deviation of the age column in the titanic dataset.</p>
<p>(a)(ii) Round these two values to 2 decimal places and output the values in a sentence.</p>
<ol start="2" type="a">
<li>There is a link between these two metrics, namely that the Standard Deviation is the square root of the Variance. Confirm this relationship. Hint: To use square root, we need the np.sqrt() function from numpy (import numpy as np).</li>
</ol>
</div>
<div id="tabset-5-2" class="unnumbered tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a aria-hidden="true" tabindex="-1"></a><span class="co"># (a)(i) &amp; (a)(ii)</span></span>
<span id="cb44-2"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-3"><a aria-hidden="true" tabindex="-1"></a>var_age <span class="op">=</span> <span class="bu">round</span>(titanic[<span class="st">"age"</span>].var(), ndigits <span class="op">=</span> <span class="dv">2</span>)</span>
<span id="cb44-4"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-5"><a aria-hidden="true" tabindex="-1"></a>std_age <span class="op">=</span> <span class="bu">round</span>(titanic[<span class="st">"age"</span>].std(), ndigits <span class="op">=</span> <span class="dv">2</span>)</span>
<span id="cb44-6"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-7"><a aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"The variance of the ages of titanic passengers was"</span>, var_age, <span class="st">"and the standard deviation was"</span>, <span class="bu">str</span>(std_age) <span class="op">+</span> <span class="st">"."</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>The variance of the ages of titanic passengers was 207.75 and the standard deviation was 14.41.</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a aria-hidden="true" tabindex="-1"></a><span class="co"># (b) </span></span>
<span id="cb46-2"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-3"><a aria-hidden="true" tabindex="-1"></a>var_age <span class="op">=</span> titanic[<span class="st">"age"</span>].var()</span>
<span id="cb46-4"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-5"><a aria-hidden="true" tabindex="-1"></a>std_age <span class="op">=</span> titanic[<span class="st">"age"</span>].std()</span>
<span id="cb46-6"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-7"><a aria-hidden="true" tabindex="-1"></a>np.sqrt(var_age) <span class="op">==</span> std_age</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>True</code></pre>
</div>
</div>
</div>
</div>
</div>
<p><a id="count" href=""></a></p>
</section>
</section>
<section id="counting-values" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Counting Values</h1>
<section id="counts" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="counts"><span class="header-section-number">6.1</span> Counts</h2>
<p>As we saw in the earlier exercise, we can find the number of non null values in a column using the .count() method. By non null values we mean values with data in them, not the missing values.</p>
<p>As a reminder we can use either .shape or len() to find the number of rows, which for titanic is 1309 rows (this includes rows that have missing values).</p>
<section id="example-11" class="level3" data-number="6.1.1">
<h3 data-number="6.1.1" class="anchored" data-anchor-id="example-11"><span class="header-section-number">6.1.1</span> Example</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a aria-hidden="true" tabindex="-1"></a>titanic[<span class="st">"embarked"</span>].count()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1307</code></pre>
</div>
</div>
<p>As you can see embarked returns 1307 - so there’s 2 missing values.</p>
</section>
</section>
<section id="null-value-counts" class="level2" data-number="6.2">
<h2 data-number="6.2" class="anchored" data-anchor-id="null-value-counts"><span class="header-section-number">6.2</span> Null Value counts</h2>
<p>We can find how many null values we have by using the .isnull() method. This returns a Boolean series consisting of True and False values whether the value is null or not.</p>
<section id="example-1-2" class="level3" data-number="6.2.1">
<h3 data-number="6.2.1" class="anchored" data-anchor-id="example-1-2"><span class="header-section-number">6.2.1</span> Example 1</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a aria-hidden="true" tabindex="-1"></a>titanic[<span class="st">"age"</span>].isnull().tail()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>1304    False
1305     True
1306    False
1307    False
1308    False
Name: age, dtype: bool</code></pre>
</div>
</div>
<p>As these have numeric values behind them (True is 1, False is 0 ) we can use .sum() to total them and obtain the number of null values in a column.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb52-1"><a aria-hidden="true" tabindex="-1"></a>titanic[<span class="st">"age"</span>].isnull().<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>263</code></pre>
</div>
</div>
<p>In more modern versions of Pandas the method .isna() also exists and provides the same output.</p>
</section>
</section>
<section id="exercise-8" class="level2" data-number="6.3">
<h2 data-number="6.3" class="anchored" data-anchor-id="exercise-8"><span class="header-section-number">6.3</span> Exercise</h2>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-6-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-1" role="tab" aria-controls="tabset-6-1" aria-selected="true" href=""><strong>Example</strong></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-2" role="tab" aria-controls="tabset-6-2" aria-selected="false" href=""><strong>Show Answer</strong></a></li></ul>
<div class="tab-content">
<div id="tabset-6-1" class="unnumbered tab-pane active" role="tabpanel" aria-labelledby="tabset-6-1-tab">
<p>Compute the proportion of null values (a decimal between 0 and 1, equivalent to a percentage, for example 0.85 means 85%) in the age column. Use the isna() function to compute the number of null values this time.</p>
<p>Hint: To compute this, we need to first compute the number of null values and divide by the number of values overall in the column <strong>including the nulls!</strong>.</p>
</div>
<div id="tabset-6-2" class="unnumbered tab-pane" role="tabpanel" aria-labelledby="tabset-6-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a aria-hidden="true" tabindex="-1"></a><span class="co"># Proportion of null values</span></span>
<span id="cb54-2"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-3"><a aria-hidden="true" tabindex="-1"></a>(titanic[<span class="st">"age"</span>].isna().<span class="bu">sum</span>())<span class="op">/</span><span class="bu">len</span>(titanic[<span class="st">"age"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>0.20091673032849502</code></pre>
</div>
</div>
<p>So we see that the age column has 20% missing values.</p>
</div>
</div>
</div>
</section>
<section id="value-counts" class="level2" data-number="6.4">
<h2 data-number="6.4" class="anchored" data-anchor-id="value-counts"><span class="header-section-number">6.4</span> Value Counts</h2>
<p>We can find the frequencies of each unique value in a column, by using .value_counts(). This is particularly useful when applied to object columns to observe what values appear the most and least frequently.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a aria-hidden="true" tabindex="-1"></a>titanic[<span class="st">"sex"</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>male      843
female    466
Name: sex, dtype: int64</code></pre>
</div>
</div>
</section>
<section id="exercise-9" class="level2" data-number="6.5">
<h2 data-number="6.5" class="anchored" data-anchor-id="exercise-9"><span class="header-section-number">6.5</span> Exercise</h2>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-7-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-1" role="tab" aria-controls="tabset-7-1" aria-selected="true" href=""><strong>Exercise</strong></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-2" role="tab" aria-controls="tabset-7-2" aria-selected="false" href=""><strong>Show Answer</strong></a></li></ul>
<div class="tab-content">
<div id="tabset-7-1" class="unnumbered tab-pane active" role="tabpanel" aria-labelledby="tabset-7-1-tab">
<ol type="a">
<li><p>How many passengers were in each class?</p></li>
<li><p>Look in the help for pd.Series.value_counts() to see how you can return the values as a proportion instead.</p></li>
</ol>
</div>
<div id="tabset-7-2" class="unnumbered tab-pane" role="tabpanel" aria-labelledby="tabset-7-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a aria-hidden="true" tabindex="-1"></a><span class="co"># (a)</span></span>
<span id="cb58-2"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-3"><a aria-hidden="true" tabindex="-1"></a>titanic[<span class="st">"pclass"</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>3    709
1    323
2    277
Name: pclass, dtype: int64</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a aria-hidden="true" tabindex="-1"></a><span class="co"># (b)</span></span>
<span id="cb60-2"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-3"><a aria-hidden="true" tabindex="-1"></a><span class="co"># Use the parameter and argument  normalize = True to return proportions</span></span>
<span id="cb60-4"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-5"><a aria-hidden="true" tabindex="-1"></a><span class="co"># Show the help documentation</span></span>
<span id="cb60-6"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-7"><a aria-hidden="true" tabindex="-1"></a><span class="bu">help</span>(pd.Series.value_counts)</span>
<span id="cb60-8"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-9"><a aria-hidden="true" tabindex="-1"></a><span class="co"># modify the previous code</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Help on function value_counts in module pandas.core.base:

value_counts(self, normalize: 'bool' = False, sort: 'bool' = True, ascending: 'bool' = False, bins=None, dropna: 'bool' = True)
    Return a Series containing counts of unique values.
    
    The resulting object will be in descending order so that the
    first element is the most frequently-occurring element.
    Excludes NA values by default.
    
    Parameters
    ----------
    normalize : bool, default False
        If True then the object returned will contain the relative
        frequencies of the unique values.
    sort : bool, default True
        Sort by frequencies.
    ascending : bool, default False
        Sort in ascending order.
    bins : int, optional
        Rather than count values, group them into half-open bins,
        a convenience for ``pd.cut``, only works with numeric data.
    dropna : bool, default True
        Don't include counts of NaN.
    
    Returns
    -------
    Series
    
    See Also
    --------
    Series.count: Number of non-NA elements in a Series.
    DataFrame.count: Number of non-NA elements in a DataFrame.
    DataFrame.value_counts: Equivalent method on DataFrames.
    
    Examples
    --------
    &gt;&gt;&gt; index = pd.Index([3, 1, 2, 3, 4, np.nan])
    &gt;&gt;&gt; index.value_counts()
    3.0    2
    1.0    1
    2.0    1
    4.0    1
    dtype: int64
    
    With `normalize` set to `True`, returns the relative frequency by
    dividing all values by the sum of values.
    
    &gt;&gt;&gt; s = pd.Series([3, 1, 2, 3, 4, np.nan])
    &gt;&gt;&gt; s.value_counts(normalize=True)
    3.0    0.4
    1.0    0.2
    2.0    0.2
    4.0    0.2
    dtype: float64
    
    **bins**
    
    Bins can be useful for going from a continuous variable to a
    categorical variable; instead of counting unique
    apparitions of values, divide the index in the specified
    number of half-open bins.
    
    &gt;&gt;&gt; s.value_counts(bins=3)
    (0.996, 2.0]    2
    (2.0, 3.0]      2
    (3.0, 4.0]      1
    dtype: int64
    
    **dropna**
    
    With `dropna` set to `False` we can also see NaN index values.
    
    &gt;&gt;&gt; s.value_counts(dropna=False)
    3.0    2
    1.0    1
    2.0    1
    4.0    1
    NaN    1
    dtype: int64</code></pre>
</div>
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb62-1"><a aria-hidden="true" tabindex="-1"></a>titanic[<span class="st">"pclass"</span>].value_counts(normalize<span class="op">=</span><span class="va">True</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>3    0.541635
1    0.246753
2    0.211612
Name: pclass, dtype: float64</code></pre>
</div>
</div>
</div>
</div>
</div>
<p><a id="other" href=""></a></p>
</section>
</section>
<section id="other-summary-statistics" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Other Summary Statistics</h1>
<section id="sum" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="sum"><span class="header-section-number">7.1</span> Sum</h2>
<p>We can use .sum() to add up columns of numeric data, which we saw when counting the null values.</p>
<section id="example-1-3" class="level3" data-number="7.1.1">
<h3 data-number="7.1.1" class="anchored" data-anchor-id="example-1-3"><span class="header-section-number">7.1.1</span> Example 1</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb64-1"><a aria-hidden="true" tabindex="-1"></a>titanic[<span class="st">"fare"</span>].<span class="bu">sum</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>43550.4869</code></pre>
</div>
</div>
<p>The .sum() method comes from Pandas; there is also an inbuilt function sum(). However if we have null values in the column this will return us nan.</p>
</section>
<section id="example-2-3" class="level3" data-number="7.1.2">
<h3 data-number="7.1.2" class="anchored" data-anchor-id="example-2-3"><span class="header-section-number">7.1.2</span> Example 2</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb66-1"><a aria-hidden="true" tabindex="-1"></a><span class="bu">sum</span>(titanic[<span class="st">"fare"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>nan</code></pre>
</div>
</div>
</section>
</section>
<section id="unique" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="unique"><span class="header-section-number">7.2</span> Unique</h2>
<p>We can use .unique() to find values that are unique in a column. This is returned as an array.</p>
<section id="example-13" class="level3" data-number="7.2.1">
<h3 data-number="7.2.1" class="anchored" data-anchor-id="example-13"><span class="header-section-number">7.2.1</span> Example</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb68-1"><a aria-hidden="true" tabindex="-1"></a>titanic[<span class="st">"boat"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>array([2, '11', nan, '3', '10', 'D', '4', '9', '6', 'B', '8', 'A', '5',
       '7', 'C', '14', '2', '5 9', '13', '1', '15', '5 7', '8 10', '12',
       '16', '13 15 B', 'C D', '15 16', '13 15'], dtype=object)</code></pre>
</div>
</div>
</section>
</section>
<section id="nunique" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="nunique"><span class="header-section-number">7.3</span> Nunique</h2>
<p>.nunique() can be used to find the number of unique values in a column.</p>
<section id="example-14" class="level3" data-number="7.3.1">
<h3 data-number="7.3.1" class="anchored" data-anchor-id="example-14"><span class="header-section-number">7.3.1</span> Example</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb70-1"><a aria-hidden="true" tabindex="-1"></a>titanic[<span class="st">"boat"</span>].nunique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>28</code></pre>
</div>
</div>
<p><a id="cut" href=""></a></p>
</section>
</section>
</section>
<section id="creating-size-bands" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Creating Size Bands</h1>
<section id="pd.cut" class="level2" data-number="8.1">
<h2 data-number="8.1" class="anchored" data-anchor-id="pd.cut"><span class="header-section-number">8.1</span> pd.cut()</h2>
<p>We can use the method pd.cut() to cut or “bin” our data into groups or categories. This is commonly done when creating size bands; like age bands, to create a categorical column out of a numeric one.</p>
<p>The method pd.cut() takes a column of data and groups it into “bins” or categories. This column will have the data type of “category”. There’s some more information about the “category” data type <a href="https://pbpython.com/pandas_dtypes_cat.html">in this link</a>.</p>
<p>We often assign the output of pd.cut() to a new column. This is because we don’t want to overwrite and change the data type of the existing column.</p>
<section id="example-15" class="level3" data-number="8.1.1">
<h3 data-number="8.1.1" class="anchored" data-anchor-id="example-15"><span class="header-section-number">8.1.1</span> Example</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb72-1"><a aria-hidden="true" tabindex="-1"></a>titanic[<span class="st">"binned_ages"</span>] <span class="op">=</span> pd.cut(titanic[<span class="st">"age"</span>],</span>
<span id="cb72-2"><a aria-hidden="true" tabindex="-1"></a>                                bins<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb72-3"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-4"><a aria-hidden="true" tabindex="-1"></a>titanic.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; "><table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:right;"> pclass </th>
   <th style="text-align:right;"> survived </th>
   <th style="text-align:left;"> name </th>
   <th style="text-align:left;"> sex </th>
   <th style="text-align:right;"> age </th>
   <th style="text-align:right;"> sibsp </th>
   <th style="text-align:right;"> parch </th>
   <th style="text-align:left;"> ticket </th>
   <th style="text-align:right;"> fare </th>
   <th style="text-align:left;"> cabin </th>
   <th style="text-align:left;"> embarked </th>
   <th style="text-align:left;"> home.dest </th>
   <th style="text-align:right;"> body </th>
   <th style="text-align:left;"> boat </th>
   <th style="text-align:left;"> binned_ages </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:left;"> Allen, Miss. Elisabeth Walton </td>
   <td style="text-align:left;"> female </td>
   <td style="text-align:right;"> 29.0000 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:left;"> 24160 </td>
   <td style="text-align:right;"> 211.3375 </td>
   <td style="text-align:left;"> B5 </td>
   <td style="text-align:left;"> S </td>
   <td style="text-align:left;"> St Louis, MO </td>
   <td style="text-align:right;"> NaN </td>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> (24.117, 32.1] </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:left;"> Allison, Master. Hudson Trevor </td>
   <td style="text-align:left;"> male </td>
   <td style="text-align:right;"> 0.9167 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 113781 </td>
   <td style="text-align:right;"> 151.5500 </td>
   <td style="text-align:left;"> C22 C26 </td>
   <td style="text-align:left;"> S </td>
   <td style="text-align:left;"> Montreal, PQ / Chesterville, ON </td>
   <td style="text-align:right;"> NaN </td>
   <td style="text-align:left;"> 11 </td>
   <td style="text-align:left;"> (0.0869, 8.15] </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:left;"> Allison, Miss. Helen Loraine </td>
   <td style="text-align:left;"> female </td>
   <td style="text-align:right;"> 2.0000 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 113781 </td>
   <td style="text-align:right;"> 151.5500 </td>
   <td style="text-align:left;"> C22 C26 </td>
   <td style="text-align:left;"> S </td>
   <td style="text-align:left;"> Montreal, PQ / Chesterville, ON </td>
   <td style="text-align:right;"> NaN </td>
   <td style="text-align:left;"> NaN </td>
   <td style="text-align:left;"> (0.0869, 8.15] </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:left;"> Allison, Mr. Hudson Joshua Creighton </td>
   <td style="text-align:left;"> male </td>
   <td style="text-align:right;"> 30.0000 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 113781 </td>
   <td style="text-align:right;"> 151.5500 </td>
   <td style="text-align:left;"> C22 C26 </td>
   <td style="text-align:left;"> S </td>
   <td style="text-align:left;"> Montreal, PQ / Chesterville, ON </td>
   <td style="text-align:right;"> 135 </td>
   <td style="text-align:left;"> NaN </td>
   <td style="text-align:left;"> (24.117, 32.1] </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:left;"> Allison, Mrs. Hudson J C (Bessie Waldo Daniels) </td>
   <td style="text-align:left;"> female </td>
   <td style="text-align:right;"> 25.0000 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 113781 </td>
   <td style="text-align:right;"> 151.5500 </td>
   <td style="text-align:left;"> C22 C26 </td>
   <td style="text-align:left;"> S </td>
   <td style="text-align:left;"> Montreal, PQ / Chesterville, ON </td>
   <td style="text-align:right;"> NaN </td>
   <td style="text-align:left;"> NaN </td>
   <td style="text-align:left;"> (24.117, 32.1] </td>
  </tr>
</tbody>
</table></div>

</div>
</div>
<p>We set the parameter bins = to specify the number of categories that we want. By passing an integer to this, Pandas takes the smallest value and the largest value in the column and creates the number of categories defined.</p>
<p>We can look at our bins. Note the bracket denotes <strong>exclusion</strong> of that number and the square bracket denotes <strong>inclusion</strong> of that number.</p>
</section>
<section id="example-1-4" class="level3" data-number="8.1.2">
<h3 data-number="8.1.2" class="anchored" data-anchor-id="example-1-4"><span class="header-section-number">8.1.2</span> Example 1</h3>
<p>Now these are categories we can see there is a relationship between each category.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb73-1"><a aria-hidden="true" tabindex="-1"></a>titanic[<span class="st">"binned_ages"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>array(['(24.117, 32.1]', '(0.0869, 8.15]', '(40.083, 48.067]',
       '(56.05, 64.033]', '(32.1, 40.083]', '(48.067, 56.05]',
       '(64.033, 72.017]', '(16.133, 24.117]', '(72.017, 80.0]', 'nan',
       '(8.15, 16.133]'], dtype=object)</code></pre>
</div>
</div>
<p>We can also pass our own values to determine where the edges of the categories are, rather than allowing Python to compute these approximate ones. This could be as a list of values or a range object that we discussed before.</p>
</section>
<section id="example-2-4" class="level3" data-number="8.1.3">
<h3 data-number="8.1.3" class="anchored" data-anchor-id="example-2-4"><span class="header-section-number">8.1.3</span> Example 2</h3>
<p>Note that here I am having to use the numpy method np.arange() as there will be decimals.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb75-1"><a aria-hidden="true" tabindex="-1"></a>titanic[<span class="st">"binned_ages2"</span>]  <span class="op">=</span> pd.cut(titanic[<span class="st">"age"</span>],  <span class="co"># Data to cut</span></span>
<span id="cb75-2"><a aria-hidden="true" tabindex="-1"></a>                                  bins<span class="op">=</span>np.arange(start<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb75-3"><a aria-hidden="true" tabindex="-1"></a>                                                 stop<span class="op">=</span>(titanic[<span class="st">"age"</span>].<span class="bu">max</span>() <span class="op">+</span> <span class="dv">1</span>) , <span class="co"># Remember stop is exclusive!</span></span>
<span id="cb75-4"><a aria-hidden="true" tabindex="-1"></a>                                                 step<span class="op">=</span><span class="dv">10</span>))</span>
<span id="cb75-5"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-6"><a aria-hidden="true" tabindex="-1"></a>titanic.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; "><table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:right;"> pclass </th>
   <th style="text-align:right;"> survived </th>
   <th style="text-align:left;"> name </th>
   <th style="text-align:left;"> sex </th>
   <th style="text-align:right;"> age </th>
   <th style="text-align:right;"> sibsp </th>
   <th style="text-align:right;"> parch </th>
   <th style="text-align:left;"> ticket </th>
   <th style="text-align:right;"> fare </th>
   <th style="text-align:left;"> cabin </th>
   <th style="text-align:left;"> embarked </th>
   <th style="text-align:left;"> home.dest </th>
   <th style="text-align:right;"> body </th>
   <th style="text-align:left;"> boat </th>
   <th style="text-align:left;"> binned_ages </th>
   <th style="text-align:left;"> binned_ages2 </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:left;"> Allen, Miss. Elisabeth Walton </td>
   <td style="text-align:left;"> female </td>
   <td style="text-align:right;"> 29.0000 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:left;"> 24160 </td>
   <td style="text-align:right;"> 211.3375 </td>
   <td style="text-align:left;"> B5 </td>
   <td style="text-align:left;"> S </td>
   <td style="text-align:left;"> St Louis, MO </td>
   <td style="text-align:right;"> NaN </td>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> (24.117, 32.1] </td>
   <td style="text-align:left;"> (20.0, 30.0] </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:left;"> Allison, Master. Hudson Trevor </td>
   <td style="text-align:left;"> male </td>
   <td style="text-align:right;"> 0.9167 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 113781 </td>
   <td style="text-align:right;"> 151.5500 </td>
   <td style="text-align:left;"> C22 C26 </td>
   <td style="text-align:left;"> S </td>
   <td style="text-align:left;"> Montreal, PQ / Chesterville, ON </td>
   <td style="text-align:right;"> NaN </td>
   <td style="text-align:left;"> 11 </td>
   <td style="text-align:left;"> (0.0869, 8.15] </td>
   <td style="text-align:left;"> (0.0, 10.0] </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:left;"> Allison, Miss. Helen Loraine </td>
   <td style="text-align:left;"> female </td>
   <td style="text-align:right;"> 2.0000 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 113781 </td>
   <td style="text-align:right;"> 151.5500 </td>
   <td style="text-align:left;"> C22 C26 </td>
   <td style="text-align:left;"> S </td>
   <td style="text-align:left;"> Montreal, PQ / Chesterville, ON </td>
   <td style="text-align:right;"> NaN </td>
   <td style="text-align:left;"> NaN </td>
   <td style="text-align:left;"> (0.0869, 8.15] </td>
   <td style="text-align:left;"> (0.0, 10.0] </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:left;"> Allison, Mr. Hudson Joshua Creighton </td>
   <td style="text-align:left;"> male </td>
   <td style="text-align:right;"> 30.0000 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 113781 </td>
   <td style="text-align:right;"> 151.5500 </td>
   <td style="text-align:left;"> C22 C26 </td>
   <td style="text-align:left;"> S </td>
   <td style="text-align:left;"> Montreal, PQ / Chesterville, ON </td>
   <td style="text-align:right;"> 135 </td>
   <td style="text-align:left;"> NaN </td>
   <td style="text-align:left;"> (24.117, 32.1] </td>
   <td style="text-align:left;"> (20.0, 30.0] </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:left;"> Allison, Mrs. Hudson J C (Bessie Waldo Daniels) </td>
   <td style="text-align:left;"> female </td>
   <td style="text-align:right;"> 25.0000 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 113781 </td>
   <td style="text-align:right;"> 151.5500 </td>
   <td style="text-align:left;"> C22 C26 </td>
   <td style="text-align:left;"> S </td>
   <td style="text-align:left;"> Montreal, PQ / Chesterville, ON </td>
   <td style="text-align:right;"> NaN </td>
   <td style="text-align:left;"> NaN </td>
   <td style="text-align:left;"> (24.117, 32.1] </td>
   <td style="text-align:left;"> (20.0, 30.0] </td>
  </tr>
</tbody>
</table></div>

</div>
</div>
<p>This means I don’t have to know the maximum value for the column before I write this piece of code. You can see how we can combine methods quite easily to make our life easier when performing such tasks.</p>
<p>It is important to note that in this part of the code :</p>
<p>stop=(titanic[“age”].max() + 1)</p>
<p>I use brackets to enforce the order of operations. If I didn’t add 1 to the stop, the entry at my maximum value would read NaN, which I want to avoid.</p>
</section>
<section id="example-3-1" class="level3" data-number="8.1.4">
<h3 data-number="8.1.4" class="anchored" data-anchor-id="example-3-1"><span class="header-section-number">8.1.4</span> Example 3</h3>
<p>We can also add labels to our categories. This time rather than displaying the bin edges it will display the text strings we specify.</p>
<p>This is passed as a list to the parameter labels= to the pd.cut() function.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb76-1"><a aria-hidden="true" tabindex="-1"></a>titanic[<span class="st">"binned_ages3"</span>] <span class="op">=</span> pd.cut(titanic[<span class="st">"age"</span>],  <span class="co"># Data to cut</span></span>
<span id="cb76-2"><a aria-hidden="true" tabindex="-1"></a>                                 bins<span class="op">=</span>np.arange(start<span class="op">=</span><span class="dv">0</span>,</span>
<span id="cb76-3"><a aria-hidden="true" tabindex="-1"></a>                                                        stop<span class="op">=</span>(titanic[<span class="st">"age"</span>].<span class="bu">max</span>() <span class="op">+</span> <span class="dv">1</span>),</span>
<span id="cb76-4"><a aria-hidden="true" tabindex="-1"></a>                                                step<span class="op">=</span><span class="dv">10</span>),</span>
<span id="cb76-5"><a aria-hidden="true" tabindex="-1"></a>                                 labels<span class="op">=</span>[<span class="st">"0 – 10"</span>, <span class="st">"11-20"</span>, <span class="st">" 21 – 30"</span>,</span>
<span id="cb76-6"><a aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"31 – 40"</span>, <span class="st">"41 – 50"</span>, <span class="st">"51 – 60"</span>,</span>
<span id="cb76-7"><a aria-hidden="true" tabindex="-1"></a>                                         <span class="st">"61 – 70"</span>, <span class="st">"71 - 80"</span>])</span>
<span id="cb76-8"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-9"><a aria-hidden="true" tabindex="-1"></a>titanic.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; "><table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:right;"> pclass </th>
   <th style="text-align:right;"> survived </th>
   <th style="text-align:left;"> name </th>
   <th style="text-align:left;"> sex </th>
   <th style="text-align:right;"> age </th>
   <th style="text-align:right;"> sibsp </th>
   <th style="text-align:right;"> parch </th>
   <th style="text-align:left;"> ticket </th>
   <th style="text-align:right;"> fare </th>
   <th style="text-align:left;"> cabin </th>
   <th style="text-align:left;"> embarked </th>
   <th style="text-align:left;"> home.dest </th>
   <th style="text-align:right;"> body </th>
   <th style="text-align:left;"> boat </th>
   <th style="text-align:left;"> binned_ages </th>
   <th style="text-align:left;"> binned_ages2 </th>
   <th style="text-align:left;"> binned_ages3 </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:left;"> Allen, Miss. Elisabeth Walton </td>
   <td style="text-align:left;"> female </td>
   <td style="text-align:right;"> 29.0000 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:left;"> 24160 </td>
   <td style="text-align:right;"> 211.3375 </td>
   <td style="text-align:left;"> B5 </td>
   <td style="text-align:left;"> S </td>
   <td style="text-align:left;"> St Louis, MO </td>
   <td style="text-align:right;"> NaN </td>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> (24.117, 32.1] </td>
   <td style="text-align:left;"> (20.0, 30.0] </td>
   <td style="text-align:left;"> 21 – 30 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:left;"> Allison, Master. Hudson Trevor </td>
   <td style="text-align:left;"> male </td>
   <td style="text-align:right;"> 0.9167 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 113781 </td>
   <td style="text-align:right;"> 151.5500 </td>
   <td style="text-align:left;"> C22 C26 </td>
   <td style="text-align:left;"> S </td>
   <td style="text-align:left;"> Montreal, PQ / Chesterville, ON </td>
   <td style="text-align:right;"> NaN </td>
   <td style="text-align:left;"> 11 </td>
   <td style="text-align:left;"> (0.0869, 8.15] </td>
   <td style="text-align:left;"> (0.0, 10.0] </td>
   <td style="text-align:left;"> 0 – 10 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:left;"> Allison, Miss. Helen Loraine </td>
   <td style="text-align:left;"> female </td>
   <td style="text-align:right;"> 2.0000 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 113781 </td>
   <td style="text-align:right;"> 151.5500 </td>
   <td style="text-align:left;"> C22 C26 </td>
   <td style="text-align:left;"> S </td>
   <td style="text-align:left;"> Montreal, PQ / Chesterville, ON </td>
   <td style="text-align:right;"> NaN </td>
   <td style="text-align:left;"> NaN </td>
   <td style="text-align:left;"> (0.0869, 8.15] </td>
   <td style="text-align:left;"> (0.0, 10.0] </td>
   <td style="text-align:left;"> 0 – 10 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:left;"> Allison, Mr. Hudson Joshua Creighton </td>
   <td style="text-align:left;"> male </td>
   <td style="text-align:right;"> 30.0000 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 113781 </td>
   <td style="text-align:right;"> 151.5500 </td>
   <td style="text-align:left;"> C22 C26 </td>
   <td style="text-align:left;"> S </td>
   <td style="text-align:left;"> Montreal, PQ / Chesterville, ON </td>
   <td style="text-align:right;"> 135 </td>
   <td style="text-align:left;"> NaN </td>
   <td style="text-align:left;"> (24.117, 32.1] </td>
   <td style="text-align:left;"> (20.0, 30.0] </td>
   <td style="text-align:left;"> 21 – 30 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:left;"> Allison, Mrs. Hudson J C (Bessie Waldo Daniels) </td>
   <td style="text-align:left;"> female </td>
   <td style="text-align:right;"> 25.0000 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 113781 </td>
   <td style="text-align:right;"> 151.5500 </td>
   <td style="text-align:left;"> C22 C26 </td>
   <td style="text-align:left;"> S </td>
   <td style="text-align:left;"> Montreal, PQ / Chesterville, ON </td>
   <td style="text-align:right;"> NaN </td>
   <td style="text-align:left;"> NaN </td>
   <td style="text-align:left;"> (24.117, 32.1] </td>
   <td style="text-align:left;"> (20.0, 30.0] </td>
   <td style="text-align:left;"> 21 – 30 </td>
  </tr>
</tbody>
</table></div>

</div>
</div>
<p>Note these bands are approximate, e.g someone with an age of 20.2 will go into the band labelled “21-30”. Integers were chosen as it’s an easier read, and most ages after 1 are whole numbers.</p>
<p>There’s additional parameters we can set here; check the help function if there’s anything specific you need to do. You will get some more practice with this in the Case Study in Chapter 7.</p>
</section>
</section>
<section id="pd.qcut" class="level2" data-number="8.2">
<h2 data-number="8.2" class="anchored" data-anchor-id="pd.qcut"><span class="header-section-number">8.2</span> pd.qcut()</h2>
<p>pd.qcut() is described in the documentation as a “Quantile-based discretization function”. This means that pd.qcut() tries to divide the data into bins of equal sizes, rather than using the numeric edges of the data to create the bins.</p>
<section id="example-16" class="level3" data-number="8.2.1">
<h3 data-number="8.2.1" class="anchored" data-anchor-id="example-16"><span class="header-section-number">8.2.1</span> Example</h3>
<p>In the cell below I’m using pd.qcut() to cut the age column in to 10. This using the same data and the same number of segments as the pd.cut() we did at the start.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb77-1"><a aria-hidden="true" tabindex="-1"></a><span class="co"># Divide fare into 3 equally sized classes.</span></span>
<span id="cb77-2"><a aria-hidden="true" tabindex="-1"></a>titanic[<span class="st">"age_qcut"</span>] <span class="op">=</span> pd.qcut(titanic[<span class="st">"age"</span>],</span>
<span id="cb77-3"><a aria-hidden="true" tabindex="-1"></a>                              q<span class="op">=</span><span class="dv">10</span>)  <span class="co"># q for quantiles</span></span>
<span id="cb77-4"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-5"><a aria-hidden="true" tabindex="-1"></a><span class="co">#View the data</span></span>
<span id="cb77-6"><a aria-hidden="true" tabindex="-1"></a>titanic.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; "><table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:right;"> pclass </th>
   <th style="text-align:right;"> survived </th>
   <th style="text-align:left;"> name </th>
   <th style="text-align:left;"> sex </th>
   <th style="text-align:right;"> age </th>
   <th style="text-align:right;"> sibsp </th>
   <th style="text-align:right;"> parch </th>
   <th style="text-align:left;"> ticket </th>
   <th style="text-align:right;"> fare </th>
   <th style="text-align:left;"> cabin </th>
   <th style="text-align:left;"> embarked </th>
   <th style="text-align:left;"> home.dest </th>
   <th style="text-align:right;"> body </th>
   <th style="text-align:left;"> boat </th>
   <th style="text-align:left;"> binned_ages </th>
   <th style="text-align:left;"> binned_ages2 </th>
   <th style="text-align:left;"> binned_ages3 </th>
   <th style="text-align:left;"> age_qcut </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:left;"> Allen, Miss. Elisabeth Walton </td>
   <td style="text-align:left;"> female </td>
   <td style="text-align:right;"> 29.0000 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:left;"> 24160 </td>
   <td style="text-align:right;"> 211.3375 </td>
   <td style="text-align:left;"> B5 </td>
   <td style="text-align:left;"> S </td>
   <td style="text-align:left;"> St Louis, MO </td>
   <td style="text-align:right;"> NaN </td>
   <td style="text-align:left;"> 2 </td>
   <td style="text-align:left;"> (24.117, 32.1] </td>
   <td style="text-align:left;"> (20.0, 30.0] </td>
   <td style="text-align:left;"> 21 – 30 </td>
   <td style="text-align:left;"> (28.0, 31.0] </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:left;"> Allison, Master. Hudson Trevor </td>
   <td style="text-align:left;"> male </td>
   <td style="text-align:right;"> 0.9167 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 113781 </td>
   <td style="text-align:right;"> 151.5500 </td>
   <td style="text-align:left;"> C22 C26 </td>
   <td style="text-align:left;"> S </td>
   <td style="text-align:left;"> Montreal, PQ / Chesterville, ON </td>
   <td style="text-align:right;"> NaN </td>
   <td style="text-align:left;"> 11 </td>
   <td style="text-align:left;"> (0.0869, 8.15] </td>
   <td style="text-align:left;"> (0.0, 10.0] </td>
   <td style="text-align:left;"> 0 – 10 </td>
   <td style="text-align:left;"> (0.166, 14.0] </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:left;"> Allison, Miss. Helen Loraine </td>
   <td style="text-align:left;"> female </td>
   <td style="text-align:right;"> 2.0000 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 113781 </td>
   <td style="text-align:right;"> 151.5500 </td>
   <td style="text-align:left;"> C22 C26 </td>
   <td style="text-align:left;"> S </td>
   <td style="text-align:left;"> Montreal, PQ / Chesterville, ON </td>
   <td style="text-align:right;"> NaN </td>
   <td style="text-align:left;"> NaN </td>
   <td style="text-align:left;"> (0.0869, 8.15] </td>
   <td style="text-align:left;"> (0.0, 10.0] </td>
   <td style="text-align:left;"> 0 – 10 </td>
   <td style="text-align:left;"> (0.166, 14.0] </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:left;"> Allison, Mr. Hudson Joshua Creighton </td>
   <td style="text-align:left;"> male </td>
   <td style="text-align:right;"> 30.0000 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 113781 </td>
   <td style="text-align:right;"> 151.5500 </td>
   <td style="text-align:left;"> C22 C26 </td>
   <td style="text-align:left;"> S </td>
   <td style="text-align:left;"> Montreal, PQ / Chesterville, ON </td>
   <td style="text-align:right;"> 135 </td>
   <td style="text-align:left;"> NaN </td>
   <td style="text-align:left;"> (24.117, 32.1] </td>
   <td style="text-align:left;"> (20.0, 30.0] </td>
   <td style="text-align:left;"> 21 – 30 </td>
   <td style="text-align:left;"> (28.0, 31.0] </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:left;"> Allison, Mrs. Hudson J C (Bessie Waldo Daniels) </td>
   <td style="text-align:left;"> female </td>
   <td style="text-align:right;"> 25.0000 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> 113781 </td>
   <td style="text-align:right;"> 151.5500 </td>
   <td style="text-align:left;"> C22 C26 </td>
   <td style="text-align:left;"> S </td>
   <td style="text-align:left;"> Montreal, PQ / Chesterville, ON </td>
   <td style="text-align:right;"> NaN </td>
   <td style="text-align:left;"> NaN </td>
   <td style="text-align:left;"> (24.117, 32.1] </td>
   <td style="text-align:left;"> (20.0, 30.0] </td>
   <td style="text-align:left;"> 21 – 30 </td>
   <td style="text-align:left;"> (22.0, 25.0] </td>
  </tr>
</tbody>
</table></div>

</div>
</div>
</section>
</section>
<section id="visual-differences-between-cut-and-qcut" class="level2" data-number="8.3">
<h2 data-number="8.3" class="anchored" data-anchor-id="visual-differences-between-cut-and-qcut"><span class="header-section-number">8.3</span> Visual Differences between cut and qcut</h2>
<p>We can really see the difference between the two new “cut” columns if we visualise them. In the following, I’ve taken a pd.cut() and a pd.qcut() and set bins/q = 10.</p>
<ul>
<li><p>The pd.cut() action on the left, cuts the range of the data into 10 bins. You can see the data is not distributed evenly between these 10 bins, but the bins are of equal size.</p></li>
<li><p>The pd.qcut() action on the right cuts the data so each of the 10 bins has roughly an equal number in each bin (edge cases in this case have made it slightly more uneven as we cannot split identical values between bins!). You can see the size of bins is not uniform, unlike the pd.cut() bins.</p></li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../images/comparing_cut_and_qcut.svg" class="img-fluid figure-img" alt="A comparison of cut and qcut and the differences between them."></p>
<p></p><figcaption class="figure-caption">A comparison of cut and qcut</figcaption><p></p>
</figure>
</div>
</section>
<section id="chart-code" class="level2" data-number="8.4">
<h2 data-number="8.4" class="anchored" data-anchor-id="chart-code"><span class="header-section-number">8.4</span> Chart Code</h2>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-8-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-1" role="tab" aria-controls="tabset-8-1" aria-selected="true" href=""><strong>Chart Code</strong></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-2" role="tab" aria-controls="tabset-8-2" aria-selected="false" href=""><strong>Show Code</strong></a></li></ul>
<div class="tab-content">
<div id="tabset-8-1" class="unnumbered tab-pane active" role="tabpanel" aria-labelledby="tabset-8-1-tab">
<p>Note that this course doesn’t cover plotting, there is a <strong>Data Visualisation in Python</strong> course avalible on the Learning Hub. The code is provided here for information purposes only.</p>
</div>
<div id="tabset-8-2" class="unnumbered tab-pane" role="tabpanel" aria-labelledby="tabset-8-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb78-1"><a aria-hidden="true" tabindex="-1"></a><span class="co"># Import the package matplotlib - and use the magic command to show visualisations below the cell.</span></span>
<span id="cb78-2"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-3"><a aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb78-4"><a aria-hidden="true" tabindex="-1"></a><span class="co">#% matplotlib inline</span></span>
<span id="cb78-5"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-6"><a aria-hidden="true" tabindex="-1"></a><span class="co"># Prep The Data for Visualsation with pd.cut() </span></span>
<span id="cb78-7"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-8"><a aria-hidden="true" tabindex="-1"></a>titanic[<span class="st">"binned_ages_2"</span>]  <span class="op">=</span> pd.cut(titanic[<span class="st">"age"</span>],  </span>
<span id="cb78-9"><a aria-hidden="true" tabindex="-1"></a>                                   bins<span class="op">=</span><span class="dv">10</span>,</span>
<span id="cb78-10"><a aria-hidden="true" tabindex="-1"></a>                                   labels<span class="op">=</span>[<span class="st">"0.0869 to 8.15"</span>, <span class="st">"8.16 to 16.133"</span>, <span class="st">"16.134 to 24.117"</span>, <span class="st">"24.117 to 32.1"</span>,</span>
<span id="cb78-11"><a aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"32.2 to 40.083"</span>, <span class="st">"40.084 to 48.067"</span>, <span class="st">"48.068, 56.05"</span>, <span class="st">"56.06 to 64.033"</span> ,</span>
<span id="cb78-12"><a aria-hidden="true" tabindex="-1"></a>                                           <span class="st">"64.033 to 72.017"</span>, <span class="st">"72.017, 80.0"</span>])</span>
<span id="cb78-13"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-14"><a aria-hidden="true" tabindex="-1"></a><span class="co"># Find the value counts, set the columns in the order I want and reset the index</span></span>
<span id="cb78-15"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-16"><a aria-hidden="true" tabindex="-1"></a>pd_cut_values <span class="op">=</span> titanic[<span class="st">"binned_ages_2"</span>].value_counts()</span>
<span id="cb78-17"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-18"><a aria-hidden="true" tabindex="-1"></a>pd_cut_values <span class="op">=</span> pd_cut_values.reindex([<span class="st">"0.0869 to 8.15"</span>, <span class="st">"8.16 to 16.133"</span>, <span class="st">"16.134 to 24.117"</span>, <span class="st">"24.117 to 32.1"</span>,</span>
<span id="cb78-19"><a aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"32.2 to 40.083"</span>, <span class="st">"40.084 to 48.067"</span>, <span class="st">"48.068, 56.05"</span>, <span class="st">"56.06 to 64.033"</span> , </span>
<span id="cb78-20"><a aria-hidden="true" tabindex="-1"></a>                                       <span class="st">"64.033 to 72.017"</span>, <span class="st">"72.017, 80.0"</span>])</span>
<span id="cb78-21"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-22"><a aria-hidden="true" tabindex="-1"></a>pd_cut_values <span class="op">=</span> pd_cut_values.reset_index()</span>
<span id="cb78-23"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-24"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-25"><a aria-hidden="true" tabindex="-1"></a><span class="co"># Prep The Data for Visualsation using pd.qcut()</span></span>
<span id="cb78-26"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-27"><a aria-hidden="true" tabindex="-1"></a>titanic[<span class="st">"q_cut_ages"</span>] <span class="op">=</span> pd.qcut(titanic[<span class="st">"age"</span>],</span>
<span id="cb78-28"><a aria-hidden="true" tabindex="-1"></a>                                q<span class="op">=</span><span class="dv">10</span>,</span>
<span id="cb78-29"><a aria-hidden="true" tabindex="-1"></a>                                labels<span class="op">=</span>[<span class="st">"0.166 to 14.0"</span>, <span class="st">"14.1 to 19.0"</span>, <span class="st">"19.1 to 22.0"</span>, <span class="st">"22.0 to 25.0"</span>, <span class="st">"25.0 to 28.0"</span>, </span>
<span id="cb78-30"><a aria-hidden="true" tabindex="-1"></a>                                        <span class="st">"28.1 to 31.0"</span>, <span class="st">"31.1 to 36.0"</span>, <span class="st">"36.0 to 42.0"</span>, <span class="st">"42.0, 50.0"</span>, <span class="st">"50.0 to 80.0"</span>])</span>
<span id="cb78-31"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-32"><a aria-hidden="true" tabindex="-1"></a><span class="co"># Find the value counts and reset the index</span></span>
<span id="cb78-33"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-34"><a aria-hidden="true" tabindex="-1"></a>q_cut_values <span class="op">=</span> titanic[<span class="st">"q_cut_ages"</span>].value_counts()</span>
<span id="cb78-35"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-36"><a aria-hidden="true" tabindex="-1"></a>q_cut_values <span class="op">=</span> q_cut_values.reindex([<span class="st">"0.166 to 14.0"</span>, <span class="st">"14.1 to 19.0"</span>, <span class="st">"19.1 to 22.0"</span>, <span class="st">"22.0 to 25.0"</span>, <span class="st">"25.0 to 28.0"</span>, </span>
<span id="cb78-37"><a aria-hidden="true" tabindex="-1"></a>                                     <span class="st">"28.1 to 31.0"</span>, <span class="st">"31.1 to 36.0"</span>, <span class="st">"36.0 to 42.0"</span>, <span class="st">"42.0, 50.0"</span>, <span class="st">"50.0 to 80.0"</span>])</span>
<span id="cb78-38"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-39"><a aria-hidden="true" tabindex="-1"></a>q_cut_values <span class="op">=</span> q_cut_values.reset_index()</span>
<span id="cb78-40"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-41"><a aria-hidden="true" tabindex="-1"></a><span class="co"># Set up the figure and axes (which are objects!)</span></span>
<span id="cb78-42"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-43"><a aria-hidden="true" tabindex="-1"></a>f, (ax1, ax2) <span class="op">=</span> plt.subplots(<span class="dv">1</span>,<span class="dv">2</span>,figsize<span class="op">=</span>(<span class="dv">16</span>,<span class="dv">6</span>))</span>
<span id="cb78-44"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-45"><a aria-hidden="true" tabindex="-1"></a><span class="co">#Plot Figure 1 - our pd.cut()</span></span>
<span id="cb78-46"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-47"><a aria-hidden="true" tabindex="-1"></a>ax1.barh(np.arange(<span class="bu">len</span>(pd_cut_values)), pd_cut_values[<span class="st">"binned_ages_2"</span>], color<span class="op">=</span><span class="st">"#094267ff"</span>)</span>
<span id="cb78-48"><a aria-hidden="true" tabindex="-1"></a>ax1.set_xlabel(<span class="st">"Frequency"</span>)</span>
<span id="cb78-49"><a aria-hidden="true" tabindex="-1"></a>ax1.set_ylabel(<span class="st">"Bins"</span>)</span>
<span id="cb78-50"><a aria-hidden="true" tabindex="-1"></a>ax1.set_title(<span class="st">"Using pd.cut() - The Frequency of Data Per Bin"</span>)</span>
<span id="cb78-51"><a aria-hidden="true" tabindex="-1"></a>ax1.set_yticklabels(pd_cut_values[<span class="st">"index"</span>])</span>
<span id="cb78-52"><a aria-hidden="true" tabindex="-1"></a>ax1.set_yticks([<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">10</span>])</span>
<span id="cb78-53"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-54"><a aria-hidden="true" tabindex="-1"></a><span class="co"># Plot figure 2 - our pd.qcut()</span></span>
<span id="cb78-55"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-56"><a aria-hidden="true" tabindex="-1"></a>ax2.barh( np.arange(<span class="bu">len</span>(q_cut_values)), q_cut_values[<span class="st">"q_cut_ages"</span>], color<span class="op">=</span><span class="st">"#a4cf00ff"</span>)</span>
<span id="cb78-57"><a aria-hidden="true" tabindex="-1"></a>ax2.set_xlabel(<span class="st">"Frequency"</span>)</span>
<span id="cb78-58"><a aria-hidden="true" tabindex="-1"></a>ax2.set_ylabel(<span class="st">"Bins"</span>)</span>
<span id="cb78-59"><a aria-hidden="true" tabindex="-1"></a>ax2.set_title(<span class="st">"Using pd.qcut() - The Frequency of Data Per Bin"</span>)</span>
<span id="cb78-60"><a aria-hidden="true" tabindex="-1"></a>ax2.set_yticklabels(q_cut_values[<span class="st">"index"</span>])</span>
<span id="cb78-61"><a aria-hidden="true" tabindex="-1"></a>ax2.set_yticks([<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>,<span class="dv">7</span>,<span class="dv">8</span>,<span class="dv">9</span>,<span class="dv">10</span>])</span>
<span id="cb78-62"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-63"><a aria-hidden="true" tabindex="-1"></a><span class="co"># Space out the figures so the right y_label doesn't overlap!</span></span>
<span id="cb78-64"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-65"><a aria-hidden="true" tabindex="-1"></a>f.tight_layout(rect<span class="op">=</span>[<span class="dv">0</span>, <span class="fl">0.03</span>, <span class="dv">1</span>, <span class="fl">0.95</span>])</span>
<span id="cb78-66"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-67"><a aria-hidden="true" tabindex="-1"></a><span class="co"># Set a Centered title to for both figures.</span></span>
<span id="cb78-68"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-69"><a aria-hidden="true" tabindex="-1"></a>f.suptitle(<span class="st">"Comparing the distribution of data within bins using pd.cut() and pd.qcut()"</span>) <span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<p><a id="agg" href=""></a></p>
</section>
</section>
<section id="aggregation" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> Aggregation</h1>
<p>Aggregation means grouping data together by a particular grouping variable (of our choice) and producing a summary of one or more columns for that grouping variable. For example, what if I want to find out if the average fare paid is different for each passenger class? I could use this technique to find out.</p>
<p>We have 3 passenger classes; 1st, 2nd and 3rd, which we can check that using the .unique() function as we saw earlier.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb79-1"><a aria-hidden="true" tabindex="-1"></a>titanic[<span class="st">"pclass"</span>].unique()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>array([1, 2, 3])</code></pre>
</div>
</div>
<section id="introducing-the-groupby-method" class="level2" data-number="9.1">
<h2 data-number="9.1" class="anchored" data-anchor-id="introducing-the-groupby-method"><span class="header-section-number">9.1</span> Introducing the groupby method</h2>
<p>We’ll use the .groupby() method in this tutorial. Panda’s also provides us with the pd.crosstab() and the pd.pivot_table() methods as well. You can find these in the <strong>Reference Material</strong> as they are a little more niche in their application.</p>
<p>This function can be really useful, especially when your data are disaggregate, e.g.&nbsp;data about individual units of people or things, rather than by category.</p>
<p>The method .groupby() allows us to aggregate by a categorical variable and summarise numerical data into a new DataFrame. It works on a very interesting principle known as <strong>split-apply-combine</strong>:</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../images/group_by.JPG" class="img-fluid figure-img" alt="Image showing the stages of the groupby, split then apply then combine."></p>
<p></p><figcaption class="figure-caption">image showing the stages of a group by</figcaption><p></p>
</figure>
</div>
<ul>
<li><p>Split is where a DataFrame is divided into a set of smaller DataFrames based on the grouping variable.</p></li>
<li><p>Apply is where an aggregation is applied to each of the groups to create a single row for each group in the original DataFrame (for example computing a mean).</p></li>
<li><p>Combine is where we bring together the aggregated DataFrame rows into a final new DataFrame.</p></li>
</ul>
<section id="example-1-5" class="level3" data-number="9.1.1">
<h3 data-number="9.1.1" class="anchored" data-anchor-id="example-1-5"><span class="header-section-number">9.1.1</span> Example 1</h3>
<p>Let’s see an example of this in action, it sounds complex (and it is with what goes on behind the scenes), but the final output is much more readable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb81-1"><a aria-hidden="true" tabindex="-1"></a>titanic_class_fare <span class="op">=</span> titanic.groupby(by<span class="op">=</span><span class="st">"pclass"</span>)[<span class="st">"fare"</span>].mean() </span>
<span id="cb81-2"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-3"><a aria-hidden="true" tabindex="-1"></a>titanic_class_fare</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; "><table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:right;"> pclass </th>
   <th style="text-align:right;"> fare </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 87.50899 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 21.17920 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 13.30289 </td>
  </tr>
</tbody>
</table></div>

</div>
</div>
<p>I want to find if the .mean() value of the Fare was different depending where someone embarked. let’s break the code down:</p>
<ul>
<li><p>In the .groupby() method to the by= parameter I pass the column I wish to group by. The column pclass has three values, “1” , “2” and “3”.</p></li>
<li><p>The .groupby() behaviour will effectively split the original DataFrame titanic into three new DataFrames. One with the values of 1, one for 2 and one with the values of 3. This is the <strong>split</strong> step.</p></li>
<li><p>From these new .groupby() DataFrames I select the column [“fare”] and apply the summary statistic .mean() to it. This is the <strong>apply</strong> step.</p></li>
<li><p>This is returned in the DataFrame “titanic_class_fare”, this is the <strong>combine</strong> step.</p></li>
</ul>
</section>
<section id="example-2-5" class="level3" data-number="9.1.2">
<h3 data-number="9.1.2" class="anchored" data-anchor-id="example-2-5"><span class="header-section-number">9.1.2</span> Example 2</h3>
<p>We can also use more complicated groupings using more than one variable, here we group first by pclass then embarked. As with many methods we discussed in earlier chapters, we must specify the column names in a list, where order is important.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb82-1"><a aria-hidden="true" tabindex="-1"></a>titanic.groupby(by<span class="op">=</span>[<span class="st">"pclass"</span>, <span class="st">"embarked"</span>])[<span class="st">"fare"</span>].mean()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; "><table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:right;"> pclass </th>
   <th style="text-align:left;"> embarked </th>
   <th style="text-align:right;"> fare </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:left;"> C </td>
   <td style="text-align:right;"> 106.84533 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:left;"> Q </td>
   <td style="text-align:right;"> 90.00000 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:left;"> S </td>
   <td style="text-align:right;"> 72.14809 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> C </td>
   <td style="text-align:right;"> 23.30059 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> Q </td>
   <td style="text-align:right;"> 11.73511 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> S </td>
   <td style="text-align:right;"> 21.20692 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:left;"> C </td>
   <td style="text-align:right;"> 11.02162 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:left;"> Q </td>
   <td style="text-align:right;"> 10.39082 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:left;"> S </td>
   <td style="text-align:right;"> 14.43542 </td>
  </tr>
</tbody>
</table></div>

</div>
</div>
<p>To show off why order is important, see the following:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb83-1"><a aria-hidden="true" tabindex="-1"></a>titanic.groupby(by<span class="op">=</span>[<span class="st">"embarked"</span>, <span class="st">"pclass"</span>])[<span class="st">"fare"</span>].mean()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; "><table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> embarked </th>
   <th style="text-align:right;"> pclass </th>
   <th style="text-align:right;"> fare </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> C </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 106.84533 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> C </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 23.30059 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> C </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 11.02162 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Q </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 90.00000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Q </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 11.73511 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Q </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 10.39082 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> S </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 72.14809 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> S </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 21.20692 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> S </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 14.43542 </td>
  </tr>
</tbody>
</table></div>

</div>
</div>
</section>
<section id="example-3-2" class="level3" data-number="9.1.3">
<h3 data-number="9.1.3" class="anchored" data-anchor-id="example-3-2"><span class="header-section-number">9.1.3</span> Example 3</h3>
<p>You can also use other summary statistics here, for example .count() to return the number of values. The following shows that 141 passengers embarked in Cherbourg (embarked = C) and were pclass 1.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb84-1"><a aria-hidden="true" tabindex="-1"></a>titanic.groupby(by<span class="op">=</span>[<span class="st">"embarked"</span>, <span class="st">"pclass"</span>])[<span class="st">"fare"</span>].count()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; "><table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> embarked </th>
   <th style="text-align:right;"> pclass </th>
   <th style="text-align:right;"> fare </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> C </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 141 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> C </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 28 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> C </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 101 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Q </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 3 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Q </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 7 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Q </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 113 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> S </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 177 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> S </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 242 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> S </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 494 </td>
  </tr>
</tbody>
</table></div>

</div>
</div>
<p>Now let’s do some exercises!</p>
</section>
</section>
<section id="exercise-11" class="level2" data-number="9.2">
<h2 data-number="9.2" class="anchored" data-anchor-id="exercise-11"><span class="header-section-number">9.2</span> Exercise</h2>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-9-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-1" role="tab" aria-controls="tabset-9-1" aria-selected="true" href=""><strong>Exercise</strong></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-2" role="tab" aria-controls="tabset-9-2" aria-selected="false" href=""><strong>Show Answer</strong></a></li></ul>
<div class="tab-content">
<div id="tabset-9-1" class="unnumbered tab-pane active" role="tabpanel" aria-labelledby="tabset-9-1-tab">
<ol type="a">
<li><p>Group animals by the column AnimalClass and find the .sum() of the IncidentNominalCost(£) column.</p></li>
<li><p>Group animals by the column Borough and AnimalClass and find the .mean() of the PumpHoursTotal column.</p></li>
<li><p>Reverse the order of the grouping in (b) and observe the differences.</p></li>
</ol>
</div>
<div id="tabset-9-2" class="unnumbered tab-pane" role="tabpanel" aria-labelledby="tabset-9-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb85-1"><a aria-hidden="true" tabindex="-1"></a><span class="co"># (a)</span></span>
<span id="cb85-2"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-3"><a aria-hidden="true" tabindex="-1"></a>animalclass_sum <span class="op">=</span> animals.groupby(by<span class="op">=</span><span class="st">"AnimalClass"</span>)[<span class="st">'IncidentNominalCost(£)'</span>].<span class="bu">sum</span>()</span>
<span id="cb85-4"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-5"><a aria-hidden="true" tabindex="-1"></a>animalclass_sum</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; "><table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> AnimalClass </th>
   <th style="text-align:right;"> IncidentNominalCost(£) </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:right;"> 350487 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Fish </td>
   <td style="text-align:right;"> 1560 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1597513 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Reptile </td>
   <td style="text-align:right;"> 3730 </td>
  </tr>
</tbody>
</table></div>

</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb86-1"><a aria-hidden="true" tabindex="-1"></a><span class="co"># (b) </span></span>
<span id="cb86-2"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-3"><a aria-hidden="true" tabindex="-1"></a>pump_hours_mean <span class="op">=</span> animals.groupby(by<span class="op">=</span>[<span class="st">"Borough"</span>, <span class="st">"AnimalClass"</span>])[<span class="st">'PumpHoursTotal'</span>].mean()</span>
<span id="cb86-4"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-5"><a aria-hidden="true" tabindex="-1"></a>pump_hours_mean.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; "><table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> Borough </th>
   <th style="text-align:left;"> AnimalClass </th>
   <th style="text-align:right;"> PumpHoursTotal </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Barking And Dagenham </td>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:right;"> 1.035714 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Barking And Dagenham </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1.141667 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Barnet </td>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:right;"> 1.066667 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Barnet </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1.164021 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Barnet </td>
   <td style="text-align:left;"> Reptile </td>
   <td style="text-align:right;"> 1.000000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bexley </td>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:right;"> 1.058823 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bexley </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1.496503 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Brent </td>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:right;"> 1.131579 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Brent </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1.085470 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Brentwood </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1.000000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bromley </td>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:right;"> 1.200000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bromley </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1.387097 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Broxbourne </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1.000000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Camden </td>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:right;"> 1.305556 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Camden </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1.204546 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Camden </td>
   <td style="text-align:left;"> Reptile </td>
   <td style="text-align:right;"> 1.000000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> City Of London </td>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:right;"> 1.142857 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> City Of London </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1.000000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Croydon </td>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:right;"> 1.127660 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Croydon </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1.146597 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Croydon </td>
   <td style="text-align:left;"> Reptile </td>
   <td style="text-align:right;"> 1.000000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Ealing </td>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:right;"> 1.035714 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Ealing </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1.131034 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Enfield </td>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:right;"> 1.200000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Enfield </td>
   <td style="text-align:left;"> Fish </td>
   <td style="text-align:right;"> 5.000000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Enfield </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1.315534 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Epping Forest </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 2.333333 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Greenwich </td>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:right;"> 1.071429 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Greenwich </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1.190789 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Greenwich </td>
   <td style="text-align:left;"> Reptile </td>
   <td style="text-align:right;"> 1.000000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Hackney </td>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:right;"> 1.034483 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Hackney </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1.128655 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Hammersmith And Fulham </td>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:right;"> 1.095238 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Hammersmith And Fulham </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1.121951 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Haringey </td>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:right;"> 1.250000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Haringey </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1.083832 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Harrow </td>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:right;"> 1.076923 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Harrow </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1.160494 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Havering </td>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:right;"> 1.076923 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Havering </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1.316129 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Hillingdon </td>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:right;"> 1.111111 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Hillingdon </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1.406667 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Hillingdon </td>
   <td style="text-align:left;"> Reptile </td>
   <td style="text-align:right;"> 1.000000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Hounslow </td>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:right;"> 1.186047 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Hounslow </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1.240741 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Hounslow </td>
   <td style="text-align:left;"> Reptile </td>
   <td style="text-align:right;"> 1.500000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Islington </td>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:right;"> 1.054054 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Islington </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1.106250 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Islington </td>
   <td style="text-align:left;"> Reptile </td>
   <td style="text-align:right;"> 1.000000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Kensington And Chelsea </td>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:right;"> 1.000000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Kensington And Chelsea </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1.090909 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Kingston Upon Thames </td>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:right;"> 1.024390 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Kingston Upon Thames </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1.267606 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Kingston Upon Thames </td>
   <td style="text-align:left;"> Reptile </td>
   <td style="text-align:right;"> 1.000000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Lambeth </td>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:right;"> 1.052632 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Lambeth </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1.114130 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Lewisham </td>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:right;"> 1.064516 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Lewisham </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1.095541 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Merton </td>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:right;"> 1.076923 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Merton </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1.101124 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Newham </td>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:right;"> 1.052632 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Newham </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1.147727 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Redbridge </td>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:right;"> 1.140000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Redbridge </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1.238806 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Richmond Upon Thames </td>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:right;"> 1.074074 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Richmond Upon Thames </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1.184615 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Southwark </td>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:right;"> 1.095238 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Southwark </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1.156425 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Sutton </td>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:right;"> 1.034483 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Sutton </td>
   <td style="text-align:left;"> Fish </td>
   <td style="text-align:right;"> 1.000000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Sutton </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1.113402 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Tandridge </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1.000000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Tower Hamlets </td>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:right;"> 1.257143 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Tower Hamlets </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1.252809 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Waltham Forest </td>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:right;"> 1.000000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Waltham Forest </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1.381818 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Wandsworth </td>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:right;"> 1.250000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Wandsworth </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1.182432 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Westminster </td>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:right;"> 1.056604 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Westminster </td>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1.177778 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Westminster </td>
   <td style="text-align:left;"> Reptile </td>
   <td style="text-align:right;"> 1.000000 </td>
  </tr>
</tbody>
</table></div>

</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb87-1"><a aria-hidden="true" tabindex="-1"></a><span class="co"># (c) </span></span>
<span id="cb87-2"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-3"><a aria-hidden="true" tabindex="-1"></a>pump_hours_mean <span class="op">=</span> animals.groupby(by<span class="op">=</span>[<span class="st">"AnimalClass"</span>, <span class="st">"Borough"</span>])[<span class="st">'PumpHoursTotal'</span>].mean()</span>
<span id="cb87-4"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-5"><a aria-hidden="true" tabindex="-1"></a>pump_hours_mean.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">

<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; "><table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> AnimalClass </th>
   <th style="text-align:left;"> Borough </th>
   <th style="text-align:right;"> PumpHoursTotal </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:left;"> Barking And Dagenham </td>
   <td style="text-align:right;"> 1.035714 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:left;"> Barnet </td>
   <td style="text-align:right;"> 1.066667 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:left;"> Bexley </td>
   <td style="text-align:right;"> 1.058823 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:left;"> Brent </td>
   <td style="text-align:right;"> 1.131579 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:left;"> Bromley </td>
   <td style="text-align:right;"> 1.200000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:left;"> Camden </td>
   <td style="text-align:right;"> 1.305556 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:left;"> City Of London </td>
   <td style="text-align:right;"> 1.142857 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:left;"> Croydon </td>
   <td style="text-align:right;"> 1.127660 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:left;"> Ealing </td>
   <td style="text-align:right;"> 1.035714 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:left;"> Enfield </td>
   <td style="text-align:right;"> 1.200000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:left;"> Greenwich </td>
   <td style="text-align:right;"> 1.071429 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:left;"> Hackney </td>
   <td style="text-align:right;"> 1.034483 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:left;"> Hammersmith And Fulham </td>
   <td style="text-align:right;"> 1.095238 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:left;"> Haringey </td>
   <td style="text-align:right;"> 1.250000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:left;"> Harrow </td>
   <td style="text-align:right;"> 1.076923 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:left;"> Havering </td>
   <td style="text-align:right;"> 1.076923 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:left;"> Hillingdon </td>
   <td style="text-align:right;"> 1.111111 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:left;"> Hounslow </td>
   <td style="text-align:right;"> 1.186047 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:left;"> Islington </td>
   <td style="text-align:right;"> 1.054054 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:left;"> Kensington And Chelsea </td>
   <td style="text-align:right;"> 1.000000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:left;"> Kingston Upon Thames </td>
   <td style="text-align:right;"> 1.024390 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:left;"> Lambeth </td>
   <td style="text-align:right;"> 1.052632 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:left;"> Lewisham </td>
   <td style="text-align:right;"> 1.064516 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:left;"> Merton </td>
   <td style="text-align:right;"> 1.076923 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:left;"> Newham </td>
   <td style="text-align:right;"> 1.052632 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:left;"> Redbridge </td>
   <td style="text-align:right;"> 1.140000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:left;"> Richmond Upon Thames </td>
   <td style="text-align:right;"> 1.074074 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:left;"> Southwark </td>
   <td style="text-align:right;"> 1.095238 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:left;"> Sutton </td>
   <td style="text-align:right;"> 1.034483 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:left;"> Tower Hamlets </td>
   <td style="text-align:right;"> 1.257143 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:left;"> Waltham Forest </td>
   <td style="text-align:right;"> 1.000000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:left;"> Wandsworth </td>
   <td style="text-align:right;"> 1.250000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:left;"> Westminster </td>
   <td style="text-align:right;"> 1.056604 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Fish </td>
   <td style="text-align:left;"> Enfield </td>
   <td style="text-align:right;"> 5.000000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Fish </td>
   <td style="text-align:left;"> Sutton </td>
   <td style="text-align:right;"> 1.000000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> Barking And Dagenham </td>
   <td style="text-align:right;"> 1.141667 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> Barnet </td>
   <td style="text-align:right;"> 1.164021 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> Bexley </td>
   <td style="text-align:right;"> 1.496503 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> Brent </td>
   <td style="text-align:right;"> 1.085470 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> Brentwood </td>
   <td style="text-align:right;"> 1.000000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> Bromley </td>
   <td style="text-align:right;"> 1.387097 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> Broxbourne </td>
   <td style="text-align:right;"> 1.000000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> Camden </td>
   <td style="text-align:right;"> 1.204546 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> City Of London </td>
   <td style="text-align:right;"> 1.000000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> Croydon </td>
   <td style="text-align:right;"> 1.146597 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> Ealing </td>
   <td style="text-align:right;"> 1.131034 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> Enfield </td>
   <td style="text-align:right;"> 1.315534 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> Epping Forest </td>
   <td style="text-align:right;"> 2.333333 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> Greenwich </td>
   <td style="text-align:right;"> 1.190789 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> Hackney </td>
   <td style="text-align:right;"> 1.128655 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> Hammersmith And Fulham </td>
   <td style="text-align:right;"> 1.121951 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> Haringey </td>
   <td style="text-align:right;"> 1.083832 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> Harrow </td>
   <td style="text-align:right;"> 1.160494 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> Havering </td>
   <td style="text-align:right;"> 1.316129 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> Hillingdon </td>
   <td style="text-align:right;"> 1.406667 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> Hounslow </td>
   <td style="text-align:right;"> 1.240741 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> Islington </td>
   <td style="text-align:right;"> 1.106250 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> Kensington And Chelsea </td>
   <td style="text-align:right;"> 1.090909 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> Kingston Upon Thames </td>
   <td style="text-align:right;"> 1.267606 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> Lambeth </td>
   <td style="text-align:right;"> 1.114130 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> Lewisham </td>
   <td style="text-align:right;"> 1.095541 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> Merton </td>
   <td style="text-align:right;"> 1.101124 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> Newham </td>
   <td style="text-align:right;"> 1.147727 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> Redbridge </td>
   <td style="text-align:right;"> 1.238806 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> Richmond Upon Thames </td>
   <td style="text-align:right;"> 1.184615 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> Southwark </td>
   <td style="text-align:right;"> 1.156425 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> Sutton </td>
   <td style="text-align:right;"> 1.113402 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> Tandridge </td>
   <td style="text-align:right;"> 1.000000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> Tower Hamlets </td>
   <td style="text-align:right;"> 1.252809 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> Waltham Forest </td>
   <td style="text-align:right;"> 1.381818 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> Wandsworth </td>
   <td style="text-align:right;"> 1.182432 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:left;"> Westminster </td>
   <td style="text-align:right;"> 1.177778 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Reptile </td>
   <td style="text-align:left;"> Barnet </td>
   <td style="text-align:right;"> 1.000000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Reptile </td>
   <td style="text-align:left;"> Camden </td>
   <td style="text-align:right;"> 1.000000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Reptile </td>
   <td style="text-align:left;"> Croydon </td>
   <td style="text-align:right;"> 1.000000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Reptile </td>
   <td style="text-align:left;"> Greenwich </td>
   <td style="text-align:right;"> 1.000000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Reptile </td>
   <td style="text-align:left;"> Hillingdon </td>
   <td style="text-align:right;"> 1.000000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Reptile </td>
   <td style="text-align:left;"> Hounslow </td>
   <td style="text-align:right;"> 1.500000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Reptile </td>
   <td style="text-align:left;"> Islington </td>
   <td style="text-align:right;"> 1.000000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Reptile </td>
   <td style="text-align:left;"> Kingston Upon Thames </td>
   <td style="text-align:right;"> 1.000000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Reptile </td>
   <td style="text-align:left;"> Westminster </td>
   <td style="text-align:right;"> 1.000000 </td>
  </tr>
</tbody>
</table></div>

</div>
</div>
</section>
<section id="multiple-aggregation" class="level2" data-number="9.3">
<h2 data-number="9.3" class="anchored" data-anchor-id="multiple-aggregation"><span class="header-section-number">9.3</span> Multiple Aggregation</h2>
<p>If we want to return more than one aggregation at once to the columns we’ve selected, there is the .agg() method. This takes a dictionary where the key is our column and the value is the aggregation method we wish to apply as a string.</p>
<p>These aggfuncs are slightly different to what we’ve seen, but are straightforward like “sum”, ”count”, ”mean” etc. Let’s first see it with one aggregation before building up to two.</p>
<section id="example-1-6" class="level3" data-number="9.3.1">
<h3 data-number="9.3.1" class="anchored" data-anchor-id="example-1-6"><span class="header-section-number">9.3.1</span> Example 1</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb88-1"><a aria-hidden="true" tabindex="-1"></a>animalclass_sum <span class="op">=</span> animals.groupby(by<span class="op">=</span><span class="st">"AnimalClass"</span>).agg({<span class="st">"IncidentNominalCost(£)"</span>: <span class="st">"sum"</span>,</span>
<span id="cb88-2"><a aria-hidden="true" tabindex="-1"></a>                                                         <span class="st">"PumpHoursTotal"</span>: <span class="st">"mean"</span>})</span>
<span id="cb88-3"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-4"><a aria-hidden="true" tabindex="-1"></a>animalclass_sum</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; "><table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> AnimalClass </th>
   <th style="text-align:right;"> IncidentNominalCost(£) </th>
   <th style="text-align:right;"> PumpHoursTotal </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:right;"> 350487 </td>
   <td style="text-align:right;"> 1.106912 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Fish </td>
   <td style="text-align:right;"> 1560 </td>
   <td style="text-align:right;"> 3.000000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1597513 </td>
   <td style="text-align:right;"> 1.203162 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Reptile </td>
   <td style="text-align:right;"> 3730 </td>
   <td style="text-align:right;"> 1.083333 </td>
  </tr>
</tbody>
</table></div>

</div>
</div>
<p>If we want to apply more than one aggregation to a column we can pass a list to the values of the dictionary. This requires us to use the numpy methods which are very similar to the methods we have used previously, so np.sum , np.mean etc.</p>
</section>
<section id="example-2-6" class="level3" data-number="9.3.2">
<h3 data-number="9.3.2" class="anchored" data-anchor-id="example-2-6"><span class="header-section-number">9.3.2</span> Example 2</h3>
<p>Here we will output the sum and the mean for IncidentNominalCost(£) and the mean for PumpHoursTotal. Notice that since there is only one method applied in the second case, we can just use the standard mean method, it is only when we use lists that numpy comes into play.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb89-1"><a aria-hidden="true" tabindex="-1"></a>animalclass_sum <span class="op">=</span> animals.groupby(by<span class="op">=</span><span class="st">"AnimalClass"</span>).agg({<span class="st">"IncidentNominalCost(£)"</span>: [np.<span class="bu">sum</span>, np.mean],</span>
<span id="cb89-2"><a aria-hidden="true" tabindex="-1"></a>                                                         <span class="st">"PumpHoursTotal"</span>: <span class="st">"mean"</span>})</span>
<span id="cb89-3"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-4"><a aria-hidden="true" tabindex="-1"></a>animalclass_sum</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; "><table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> AnimalClass                  </th>
   <th style="text-align:right;"> IncidentNominalCost(£)  sum  </th>
   <th style="text-align:right;">                         mean </th>
   <th style="text-align:right;"> PumpHoursTotal          mean </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Bird </td>
   <td style="text-align:right;"> 350487 </td>
   <td style="text-align:right;"> 323.0295 </td>
   <td style="text-align:right;"> 1.106912 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Fish </td>
   <td style="text-align:right;"> 1560 </td>
   <td style="text-align:right;"> 780.0000 </td>
   <td style="text-align:right;"> 3.000000 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Mammal </td>
   <td style="text-align:right;"> 1597513 </td>
   <td style="text-align:right;"> 346.0067 </td>
   <td style="text-align:right;"> 1.203162 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Reptile </td>
   <td style="text-align:right;"> 3730 </td>
   <td style="text-align:right;"> 310.8333 </td>
   <td style="text-align:right;"> 1.083333 </td>
  </tr>
</tbody>
</table></div>

</div>
</div>
</section>
</section>
<section id="exercise-13" class="level2" data-number="9.4">
<h2 data-number="9.4" class="anchored" data-anchor-id="exercise-13"><span class="header-section-number">9.4</span> Exercise</h2>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-10-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-1" role="tab" aria-controls="tabset-10-1" aria-selected="true" href=""><strong>Exercise</strong></a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-10-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-2" role="tab" aria-controls="tabset-10-2" aria-selected="false" href=""><strong>Show Answer</strong></a></li></ul>
<div class="tab-content">
<div id="tabset-10-1" class="unnumbered tab-pane active" role="tabpanel" aria-labelledby="tabset-10-1-tab">
<p>Group the animals dataset by the variable Borough and obtain the following summary statistics:</p>
<ul>
<li><p>The variance and standard deviation of the IncidentNominalCost(£) column.</p></li>
<li><p>The mean of the PumpCount column.</p></li>
<li><p>The sum of the PumpHoursTotal column.</p></li>
</ul>
</div>
<div id="tabset-10-2" class="unnumbered tab-pane" role="tabpanel" aria-labelledby="tabset-10-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb90-1"><a aria-hidden="true" tabindex="-1"></a>animals_aggregates <span class="op">=</span> animals.groupby(by <span class="op">=</span> <span class="st">"Borough"</span>).agg({<span class="st">"IncidentNominalCost(£)"</span>:[np.var, np.std],</span>
<span id="cb90-2"><a aria-hidden="true" tabindex="-1"></a>                <span class="st">"PumpCount"</span>:<span class="st">"mean"</span>,</span>
<span id="cb90-3"><a aria-hidden="true" tabindex="-1"></a>                <span class="st">"PumpHoursTotal"</span>:<span class="st">"sum"</span>})</span>
<span id="cb90-4"><a aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-5"><a aria-hidden="true" tabindex="-1"></a>animals_aggregates</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output-display">

<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; "><table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> Borough                      </th>
   <th style="text-align:right;"> IncidentNominalCost(£)  var  </th>
   <th style="text-align:right;">                         std  </th>
   <th style="text-align:right;"> PumpCount               mean </th>
   <th style="text-align:right;"> PumpHoursTotal          sum  </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Barking And Dagenham </td>
   <td style="text-align:right;"> 17478.447 </td>
   <td style="text-align:right;"> 132.20608 </td>
   <td style="text-align:right;"> 1.006757 </td>
   <td style="text-align:right;"> 166 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Barnet </td>
   <td style="text-align:right;"> 18924.150 </td>
   <td style="text-align:right;"> 137.56507 </td>
   <td style="text-align:right;"> 1.017021 </td>
   <td style="text-align:right;"> 269 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bexley </td>
   <td style="text-align:right;"> 101288.188 </td>
   <td style="text-align:right;"> 318.25805 </td>
   <td style="text-align:right;"> 1.050000 </td>
   <td style="text-align:right;"> 232 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Brent </td>
   <td style="text-align:right;"> 14903.636 </td>
   <td style="text-align:right;"> 122.08045 </td>
   <td style="text-align:right;"> 1.012903 </td>
   <td style="text-align:right;"> 170 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Brentwood </td>
   <td style="text-align:right;"> NaN </td>
   <td style="text-align:right;"> NaN </td>
   <td style="text-align:right;"> 1.000000 </td>
   <td style="text-align:right;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Bromley </td>
   <td style="text-align:right;"> 96915.277 </td>
   <td style="text-align:right;"> 311.31219 </td>
   <td style="text-align:right;"> 1.037915 </td>
   <td style="text-align:right;"> 288 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Broxbourne </td>
   <td style="text-align:right;"> NaN </td>
   <td style="text-align:right;"> NaN </td>
   <td style="text-align:right;"> 1.000000 </td>
   <td style="text-align:right;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Camden </td>
   <td style="text-align:right;"> 101271.452 </td>
   <td style="text-align:right;"> 318.23176 </td>
   <td style="text-align:right;"> 1.035503 </td>
   <td style="text-align:right;"> 207 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> City Of London </td>
   <td style="text-align:right;"> 5970.091 </td>
   <td style="text-align:right;"> 77.26636 </td>
   <td style="text-align:right;"> 1.000000 </td>
   <td style="text-align:right;"> 12 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Croydon </td>
   <td style="text-align:right;"> 12917.137 </td>
   <td style="text-align:right;"> 113.65358 </td>
   <td style="text-align:right;"> 1.000000 </td>
   <td style="text-align:right;"> 273 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Ealing </td>
   <td style="text-align:right;"> 12108.625 </td>
   <td style="text-align:right;"> 110.03920 </td>
   <td style="text-align:right;"> 1.019901 </td>
   <td style="text-align:right;"> 222 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Enfield </td>
   <td style="text-align:right;"> 52486.690 </td>
   <td style="text-align:right;"> 229.09974 </td>
   <td style="text-align:right;"> 1.072874 </td>
   <td style="text-align:right;"> 324 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Epping Forest </td>
   <td style="text-align:right;"> 101180.333 </td>
   <td style="text-align:right;"> 318.08856 </td>
   <td style="text-align:right;"> 1.333333 </td>
   <td style="text-align:right;"> 7 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Greenwich </td>
   <td style="text-align:right;"> 27466.981 </td>
   <td style="text-align:right;"> 165.73165 </td>
   <td style="text-align:right;"> 1.016575 </td>
   <td style="text-align:right;"> 212 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Hackney </td>
   <td style="text-align:right;"> 11048.170 </td>
   <td style="text-align:right;"> 105.11027 </td>
   <td style="text-align:right;"> 1.000000 </td>
   <td style="text-align:right;"> 223 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Hammersmith And Fulham </td>
   <td style="text-align:right;"> 24555.949 </td>
   <td style="text-align:right;"> 156.70338 </td>
   <td style="text-align:right;"> 1.020833 </td>
   <td style="text-align:right;"> 161 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Haringey </td>
   <td style="text-align:right;"> 19360.601 </td>
   <td style="text-align:right;"> 139.14238 </td>
   <td style="text-align:right;"> 1.014778 </td>
   <td style="text-align:right;"> 226 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Harrow </td>
   <td style="text-align:right;"> 14084.829 </td>
   <td style="text-align:right;"> 118.67952 </td>
   <td style="text-align:right;"> 1.009346 </td>
   <td style="text-align:right;"> 122 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Havering </td>
   <td style="text-align:right;"> 43320.560 </td>
   <td style="text-align:right;"> 208.13592 </td>
   <td style="text-align:right;"> 1.035714 </td>
   <td style="text-align:right;"> 218 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Hillingdon </td>
   <td style="text-align:right;"> 81438.479 </td>
   <td style="text-align:right;"> 285.37428 </td>
   <td style="text-align:right;"> 1.048128 </td>
   <td style="text-align:right;"> 252 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Hounslow </td>
   <td style="text-align:right;"> 61567.012 </td>
   <td style="text-align:right;"> 248.12701 </td>
   <td style="text-align:right;"> 1.032680 </td>
   <td style="text-align:right;"> 188 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Islington </td>
   <td style="text-align:right;"> 27034.293 </td>
   <td style="text-align:right;"> 164.42109 </td>
   <td style="text-align:right;"> 1.005025 </td>
   <td style="text-align:right;"> 218 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Kensington And Chelsea </td>
   <td style="text-align:right;"> 9777.240 </td>
   <td style="text-align:right;"> 98.87993 </td>
   <td style="text-align:right;"> 1.008000 </td>
   <td style="text-align:right;"> 135 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Kingston Upon Thames </td>
   <td style="text-align:right;"> 33175.594 </td>
   <td style="text-align:right;"> 182.14169 </td>
   <td style="text-align:right;"> 1.008850 </td>
   <td style="text-align:right;"> 133 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Lambeth </td>
   <td style="text-align:right;"> 10143.245 </td>
   <td style="text-align:right;"> 100.71368 </td>
   <td style="text-align:right;"> 1.018018 </td>
   <td style="text-align:right;"> 245 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Lewisham </td>
   <td style="text-align:right;"> 10361.723 </td>
   <td style="text-align:right;"> 101.79255 </td>
   <td style="text-align:right;"> 1.000000 </td>
   <td style="text-align:right;"> 205 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Merton </td>
   <td style="text-align:right;"> 13145.226 </td>
   <td style="text-align:right;"> 114.65263 </td>
   <td style="text-align:right;"> 1.000000 </td>
   <td style="text-align:right;"> 126 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Newham </td>
   <td style="text-align:right;"> 22322.973 </td>
   <td style="text-align:right;"> 149.40874 </td>
   <td style="text-align:right;"> 1.005128 </td>
   <td style="text-align:right;"> 222 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Redbridge </td>
   <td style="text-align:right;"> 29134.821 </td>
   <td style="text-align:right;"> 170.68925 </td>
   <td style="text-align:right;"> 1.016304 </td>
   <td style="text-align:right;"> 223 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Richmond Upon Thames </td>
   <td style="text-align:right;"> 21911.281 </td>
   <td style="text-align:right;"> 148.02460 </td>
   <td style="text-align:right;"> 1.012739 </td>
   <td style="text-align:right;"> 183 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Southwark </td>
   <td style="text-align:right;"> 19417.533 </td>
   <td style="text-align:right;"> 139.34681 </td>
   <td style="text-align:right;"> 1.000000 </td>
   <td style="text-align:right;"> 253 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Sutton </td>
   <td style="text-align:right;"> 11911.605 </td>
   <td style="text-align:right;"> 109.14030 </td>
   <td style="text-align:right;"> 1.015748 </td>
   <td style="text-align:right;"> 139 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Tandridge </td>
   <td style="text-align:right;"> NaN </td>
   <td style="text-align:right;"> NaN </td>
   <td style="text-align:right;"> 1.000000 </td>
   <td style="text-align:right;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Tower Hamlets </td>
   <td style="text-align:right;"> 64299.890 </td>
   <td style="text-align:right;"> 253.57423 </td>
   <td style="text-align:right;"> 1.051643 </td>
   <td style="text-align:right;"> 267 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Waltham Forest </td>
   <td style="text-align:right;"> 111310.958 </td>
   <td style="text-align:right;"> 333.63297 </td>
   <td style="text-align:right;"> 1.049261 </td>
   <td style="text-align:right;"> 266 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Wandsworth </td>
   <td style="text-align:right;"> 34465.758 </td>
   <td style="text-align:right;"> 185.64956 </td>
   <td style="text-align:right;"> 1.027778 </td>
   <td style="text-align:right;"> 215 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Westminster </td>
   <td style="text-align:right;"> 29891.372 </td>
   <td style="text-align:right;"> 172.89122 </td>
   <td style="text-align:right;"> 1.034483 </td>
   <td style="text-align:right;"> 164 </td>
  </tr>
</tbody>
</table></div>

</div>
</div>
</div>
</div>
</div>
<p>In later versions of Pandas (from 0.25.0) named aggregation also exists. <a href="https://deanla.com/pandas_named_agg.html">A great guide to this can be found here</a>. We don’t cover this here formally as it requires us to nest dictionaries which is outside the scope of the course but is definitely worth picking up once you have had more time with Python.</p>
<p>Note that these DataFrames displayed when you run the code look a little different to the ones I have displayed here. You will see that in yours, the index is our grouping categories. We can use our .reset_index() method here too, or use “as_index = False”. There are a few reasons we might do this, including making visualisation easier.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb91-1"><a aria-hidden="true" tabindex="-1"></a>group_by_dropped_index <span class="op">=</span> titanic.groupby(by<span class="op">=</span>[<span class="st">"embarked"</span>, <span class="st">"pclass"</span>], as_index<span class="op">=</span> <span class="va">False</span>)[<span class="st">"fare"</span>].count()</span>
<span id="cb91-2"><a aria-hidden="true" tabindex="-1"></a>group_by_dropped_index</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  embarked  pclass  fare
0        C       1   141
1        C       2    28
2        C       3   101
3        Q       1     3
4        Q       2     7
5        Q       3   113
6        S       1   177
7        S       2   242
8        S       3   494</code></pre>
</div>
</div>
<div class="cell">
<div class="cell-output-display">

<div style="border: 1px solid #ddd; padding: 5px; overflow-x: scroll; width:100%; "><table class="table table-striped table-hover table-condensed" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> embarked </th>
   <th style="text-align:right;"> pclass </th>
   <th style="text-align:right;"> fare </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> C </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 141 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> C </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 28 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> C </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 101 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Q </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 3 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Q </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 7 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Q </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 113 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> S </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 177 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> S </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 242 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> S </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 494 </td>
  </tr>
</tbody>
</table></div>

</div>
</div>
<p><a id="END" href=""></a></p>
</section>
</section>
<section id="chapter-summary" class="level1" data-number="10">
<h1 data-number="10"><span class="header-section-number">10</span> Chapter Summary</h1>
<p>Excellent job, you have completed Chapter 6 of the Introduction to Python course. There is only one chapter left before you complete <strong>Core Part 1</strong> of the course! Absolutely amazing aggregating!</p>
<p>Chapter 7 will feature a structured end of course exercise, that tests you on everything you have learned from Chapter 3 to Chapter 6, with a new dataset we have yet to explore, the <strong>schools</strong> dataset.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
    var links = window.document.querySelectorAll('a:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
          // target, if specified
          link.setAttribute("target", "_blank");
      }
    }
});
</script>
</div> <!-- /content -->



</body></html>
